<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>JVM æ ¸å¿ƒæŠ€æœ¯-JVM åŸºç¡€çŸ¥è¯† | Leo's notes</title><meta name="keywords" content="JVM"><meta name="author" content="Leo Liu"><meta name="copyright" content="Leo Liu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JVM åŸºç¡€çŸ¥è¯† ä»€ä¹ˆæ˜¯ JVM JVM æ˜¯ Java Virtual Machineï¼ˆ Java è™šæ‹Ÿæœºï¼‰çš„ç¼©å†™ï¼Œæ˜¯é€šè¿‡åœ¨å®é™…çš„è®¡ç®—æœºä¸Šä»¿çœŸæ¨¡æ‹Ÿå„ç§è®¡ç®—æœºåŠŸèƒ½æ¥å®ç°çš„ã€‚ç”±ä¸€å¥—å­—èŠ‚ç æŒ‡ä»¤é›†ã€ä¸€ç»„å¯„å­˜å™¨ã€ä¸€ä¸ªæ ˆã€ä¸€ä¸ªåƒåœ¾å›æ”¶å †å’Œä¸€ä¸ªå­˜å‚¨æ–¹æ³•åŸŸç­‰ç»„æˆã€‚JVM å±è”½äº†ä¸æ“ä½œç³»ç»Ÿå¹³å°ç›¸å…³çš„ä¿¡æ¯ï¼Œä½¿å¾— Java ç¨‹åºåªéœ€è¦ç”Ÿæˆåœ¨ Java è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ç›®æ ‡ä»£ç ï¼ˆå­—èŠ‚ç ï¼‰ï¼Œå°±å¯åœ¨å¤šç§å¹³å°ä¸Šä¸åŠ ä¿®æ”¹çš„è¿è¡Œï¼Œè¿™">
<meta property="og:type" content="article">
<meta property="og:title" content="JVM æ ¸å¿ƒæŠ€æœ¯-JVM åŸºç¡€çŸ¥è¯†">
<meta property="og:url" content="https://liule8.github.io/post/7cc01704.html">
<meta property="og:site_name" content="Leo&#39;s notes">
<meta property="og:description" content="JVM åŸºç¡€çŸ¥è¯† ä»€ä¹ˆæ˜¯ JVM JVM æ˜¯ Java Virtual Machineï¼ˆ Java è™šæ‹Ÿæœºï¼‰çš„ç¼©å†™ï¼Œæ˜¯é€šè¿‡åœ¨å®é™…çš„è®¡ç®—æœºä¸Šä»¿çœŸæ¨¡æ‹Ÿå„ç§è®¡ç®—æœºåŠŸèƒ½æ¥å®ç°çš„ã€‚ç”±ä¸€å¥—å­—èŠ‚ç æŒ‡ä»¤é›†ã€ä¸€ç»„å¯„å­˜å™¨ã€ä¸€ä¸ªæ ˆã€ä¸€ä¸ªåƒåœ¾å›æ”¶å †å’Œä¸€ä¸ªå­˜å‚¨æ–¹æ³•åŸŸç­‰ç»„æˆã€‚JVM å±è”½äº†ä¸æ“ä½œç³»ç»Ÿå¹³å°ç›¸å…³çš„ä¿¡æ¯ï¼Œä½¿å¾— Java ç¨‹åºåªéœ€è¦ç”Ÿæˆåœ¨ Java è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ç›®æ ‡ä»£ç ï¼ˆå­—èŠ‚ç ï¼‰ï¼Œå°±å¯åœ¨å¤šç§å¹³å°ä¸Šä¸åŠ ä¿®æ”¹çš„è¿è¡Œï¼Œè¿™">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2020-10-18T17:19:05.000Z">
<meta property="article:modified_time" content="2021-11-19T11:41:38.513Z">
<meta property="article:author" content="Leo Liu">
<meta property="article:tag" content="JVM">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://liule8.github.io/post/7cc01704"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-11-19 11:41:38'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/images/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">424</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">84</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">51</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Leo's notes</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JVM æ ¸å¿ƒæŠ€æœ¯-JVM åŸºç¡€çŸ¥è¯†</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2020-10-18T17:19:05.000Z" title="å‘è¡¨äº 2020-10-18 17:19:05">2020-10-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2021-11-19T11:41:38.513Z" title="æ›´æ–°äº 2021-11-19 11:41:38">2021-11-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/JVM/">JVM</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">7.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>28åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JVM æ ¸å¿ƒæŠ€æœ¯-JVM åŸºç¡€çŸ¥è¯†"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>JVM åŸºç¡€çŸ¥è¯†</h1>
<h2 id="ä»€ä¹ˆæ˜¯-JVM">ä»€ä¹ˆæ˜¯ JVM</h2>
<p>JVM æ˜¯ Java Virtual Machineï¼ˆ Java è™šæ‹Ÿæœºï¼‰çš„ç¼©å†™ï¼Œæ˜¯é€šè¿‡åœ¨å®é™…çš„è®¡ç®—æœºä¸Šä»¿çœŸæ¨¡æ‹Ÿå„ç§è®¡ç®—æœºåŠŸèƒ½æ¥å®ç°çš„ã€‚ç”±<strong>ä¸€å¥—å­—èŠ‚ç æŒ‡ä»¤é›†ã€ä¸€ç»„å¯„å­˜å™¨ã€ä¸€ä¸ªæ ˆã€ä¸€ä¸ªåƒåœ¾å›æ”¶å †å’Œä¸€ä¸ªå­˜å‚¨æ–¹æ³•åŸŸç­‰</strong>ç»„æˆã€‚JVM å±è”½äº†ä¸æ“ä½œç³»ç»Ÿå¹³å°ç›¸å…³çš„ä¿¡æ¯ï¼Œä½¿å¾— Java ç¨‹åºåªéœ€è¦ç”Ÿæˆåœ¨ Java è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ç›®æ ‡ä»£ç ï¼ˆå­—èŠ‚ç ï¼‰ï¼Œå°±å¯åœ¨å¤šç§å¹³å°ä¸Šä¸åŠ ä¿®æ”¹çš„è¿è¡Œï¼Œè¿™ä¹Ÿæ˜¯ Java èƒ½å¤Ÿâ€œ<strong>ä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œçš„</strong>â€åŸå› ã€‚</p>
<h2 id="JREã€JDK-å’Œ-JVM-çš„å…³ç³»">JREã€JDK å’Œ JVM çš„å…³ç³»</h2>
<ul>
<li>
<p>**JVMï¼ˆ Java Virtual Machineï¼Œ Java è™šæ‹Ÿæœºï¼‰**æ˜¯ JRE çš„ä¸€éƒ¨åˆ†ã€‚JVM ä¸»è¦å·¥ä½œæ˜¯è§£é‡Šè‡ªå·±çš„æŒ‡ä»¤é›†ï¼ˆå³å­—èŠ‚ç ï¼‰å¹¶æ˜ å°„åˆ°æœ¬åœ°çš„CPUæŒ‡ä»¤é›†å’ŒOSçš„ç³»ç»Ÿè°ƒç”¨ã€‚Java è¯­è¨€æ˜¯è·¨å¹³å°è¿è¡Œçš„ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿä¼šæœ‰ä¸åŒçš„ JVM æ˜ å°„è§„åˆ™ï¼Œä½¿ä¹‹ä¸æ“ä½œç³»ç»Ÿæ— å…³ï¼Œå®Œæˆè·¨å¹³å°æ€§ã€‚</p>
</li>
<li>
<p><strong>JREï¼ˆ Java Runtime Environmentï¼Œ Java è¿è¡Œç¯å¢ƒï¼‰</strong>ï¼šåœ¨ Java å¹³å°ï¼Œæ‰€æœ‰çš„ç¨‹åºéƒ½è¦åœ¨ JRE ä¸‹æ‰èƒ½å¤Ÿè¿è¡Œã€‚åŒ…æ‹¬ JVM å’Œ Java æ ¸å¿ƒç±»åº“å’Œæ”¯æŒæ–‡ä»¶ã€‚</p>
</li>
<li>
<p><strong>JDKï¼ˆ Java Development Kitï¼ŒJava å¼€å‘å·¥å…·åŒ…ï¼‰</strong>ï¼šæ˜¯ç”¨æ¥ç¼–è¯‘ã€è°ƒè¯• Java ç¨‹åºçš„å¼€å‘å·¥å…·åŒ…ï¼ŒåŒ…æ‹¬ Java å·¥å…·ï¼ˆ javac/java/jdb ç­‰ï¼‰å’Œ Java åŸºç¡€çš„ç±»åº“ã€‚</p>
</li>
</ul>
<blockquote>
<p>ğŸ“Œ åŒ…å«å…³ç³»ï¼šJVM &lt; JRE &lt; JDK</p>
</blockquote>
<h2 id="JVM-åŸç†">JVM åŸç†</h2>
<h3 id="Java-ä½“ç³»ç»“æ„ä»‹ç»">Java ä½“ç³»ç»“æ„ä»‹ç»</h3>
<p><img src="http://image.leonote.cn/20201030134056.png" alt=""></p>
<ul>
<li>Class Loaderï¼ˆç±»åŠ è½½å™¨ï¼‰ï¼šç”¨äºè£…è½½ .class æ–‡ä»¶ã€‚</li>
<li>Execution Engineï¼ˆæ‰§è¡Œå¼•æ“ï¼‰ï¼šç”¨äºæ‰§è¡Œå­—èŠ‚ç æˆ–è€…æœ¬åœ°æ–¹æ³•ã€‚</li>
<li>è¿è¡Œæ—¶æ•°æ®åŒºï¼šæ–¹æ³•åŒºã€å †ã€java æ ˆã€pc å¯„å­˜å™¨ã€æœ¬åœ°æ–¹æ³•æ ˆã€‚</li>
</ul>
<h3 id="JVM-ç”Ÿå‘½å‘¨æœŸä»‹ç»">JVM ç”Ÿå‘½å‘¨æœŸä»‹ç»</h3>
<p>Java å®ä¾‹å¯¹åº”ä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„ Java ç¨‹åºï¼ˆ<strong>è¿›ç¨‹çº§åˆ«</strong>ï¼‰</p>
<ol>
<li>
<p><strong>å¯åŠ¨</strong></p>
<p>å¯åŠ¨ä¸€ä¸ª Java ç¨‹åºï¼Œä¸€ä¸ª JVM å®ä¾‹å°±äº§ç”Ÿã€‚æ‹¥æœ‰</p>
<p><code>public static void main(String[] args)</code> å‡½æ•°çš„ class å¯ä»¥ä½œä¸º JVM å®ä¾‹è¿è¡Œçš„èµ·ç‚¹ã€‚</p>
</li>
<li>
<p><strong>è¿è¡Œ</strong></p>
<p>main() ä½œä¸ºç¨‹åºåˆå§‹çº¿ç¨‹çš„èµ·ç‚¹ï¼Œä»»ä½•å…¶ä»–çº¿ç¨‹å‡å¯ç”±è¯¥çº¿ç¨‹å¯åŠ¨ã€‚</p>
<p>JVM å†…éƒ¨æœ‰ä¸¤ç§çº¿ç¨‹ï¼šå®ˆæŠ¤çº¿ç¨‹å’Œéå®ˆæŠ¤çº¿ç¨‹ï¼Œmain() å±äºéå®ˆæŠ¤çº¿ç¨‹ï¼Œå®ˆæŠ¤çº¿ç¨‹é€šå¸¸ç”± JVM ä½¿ç”¨ï¼Œç¨‹åºå¯ä»¥æŒ‡å®šåˆ›å»ºçš„çº¿ç¨‹ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚</p>
</li>
<li>
<p><strong>æ¶ˆäº¡</strong></p>
<p>å½“ç¨‹åºä¸­çš„æ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹éƒ½ç»ˆæ­¢æ—¶ï¼ŒJVM æ‰é€€å‡ºï¼›è‹¥å®‰å…¨ç®¡ç†å™¨å…è®¸ï¼Œç¨‹åºä¹Ÿå¯ä»¥ä½¿ç”¨ Runtime ç±»æˆ–è€… <code>System.exit()</code> æ¥é€€å‡ºã€‚</p>
</li>
</ol>
<p>JVM æ‰§è¡Œå¼•æ“å®ä¾‹åˆ™å¯¹åº”äº†å±äºç”¨æˆ·è¿è¡Œç¨‹åºçº¿ç¨‹ï¼Œå®ƒæ˜¯çº¿ç¨‹çº§åˆ«çš„ã€‚</p>
<h2 id="JAVA-å­—èŠ‚ç ">JAVA å­—èŠ‚ç </h2>
<h3 id="ä½œç”¨">ä½œç”¨</h3>
<p>å½“JVMéœ€è¦æŸç±»æ—¶ï¼Œå®ƒä¼šæ ¹æ®åç§°å‘ClassLoaderè¦æ±‚è¿™ä¸ªç±»ï¼Œç„¶åç”±ClassLoaderè¿”å› è¿™ä¸ªç±»çš„classå¯¹è±¡ã€‚</p>
<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/6844903939112976391">JAVAå­—èŠ‚ç çš„æ¢ç§˜</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/6844903588716609543">è½»æ¾çœ‹æ‡‚JAVAå­—èŠ‚ç </a></p>
<h3 id="ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿ">ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿ</h3>
<p>å­—èŠ‚ç ç”±å•å­—èŠ‚çš„æŒ‡ä»¤ç»„æˆï¼Œç†è®ºä¸Šæœ€å¤šæ”¯æŒ256ä¸ªæ“ä½œç ï¼ˆopcodeï¼‰ï¼Œå®é™…ä¸ŠJavaåªä½¿ç”¨äº†200å·¦å³çš„æ“ä½œç ï¼Œè¿˜æœ‰ä¸€äº›æ“ä½œç åˆ™ä¿ç•™ç»™è°ƒè¯•æ“ä½œ</p>
<p>æ ¹æ®æŒ‡ä»¤çš„æ€§è´¨ï¼Œä¸»è¦åˆ†ä¸ºå››ä¸ªå¤§ç±»ï¼š</p>
<ol>
<li>æ ˆæ“ä½œæŒ‡ä»¤ï¼ŒåŒ…æ‹¬ä¸å±€éƒ¨å˜é‡äº¤äº’çš„æŒ‡ä»¤</li>
<li>ç¨‹åºæµç¨‹æ§åˆ¶æŒ‡ä»¤</li>
<li>å¯¹è±¡æ“ä½œæŒ‡ä»¤ï¼ŒåŒ…æ‹¬æ–¹æ³•è°ƒç”¨æŒ‡ä»¤</li>
<li>ç®—æœ¯è¿ç®—ä»¥åŠç±»å‹è½¬æ¢æŒ‡ä»¤</li>
</ol>
<h3 id="ç”Ÿæˆå­—èŠ‚ç ">ç”Ÿæˆå­—èŠ‚ç </h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloByteCode</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        HelloByteCode helloByteCode = <span class="keyword">new</span> HelloByteCode();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å‘½ä»¤ç”Ÿæˆå­—èŠ‚ç ï¼š</p>
<ul>
<li>javac HelloByteCode.java</li>
<li>javap -c HelloByteCode.class</li>
</ul>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<p>æ˜¯é€šè¿‡åŠ©è®°ç¬¦æ˜¾ç¤ºå‡ºæ¥çš„ï¼Œå®é™…ä¸Šä¸€ä¸ªæŒ‡ä»¤ä»£è¡¨ä¸€ä¸ªå­—èŠ‚ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Compiled from &quot;HelloByteCode.java&quot;</span><br><span class="line">public class org.example.HelloByteCode &#123;</span><br><span class="line">  public org.example.HelloByteCode();</span><br><span class="line">    Code:</span><br><span class="line">       0: aload_0</span><br><span class="line">       1: invokespecial #1                  &#x2F;&#x2F; Method java&#x2F;lang&#x2F;Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">       4: return</span><br><span class="line"></span><br><span class="line">  public static void main(java.lang.String[]);</span><br><span class="line">    Code:</span><br><span class="line">       0: new           #2                  &#x2F;&#x2F; class org&#x2F;example&#x2F;HelloByteCode</span><br><span class="line">       3: dup</span><br><span class="line">       4: invokespecial #3                  &#x2F;&#x2F; Method &quot;&lt;init&gt;&quot;:()V</span><br><span class="line">       7: astore_1</span><br><span class="line">       8: return</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æœ€ç®€å•çš„å­—èŠ‚ç ">æœ€ç®€å•çš„å­—èŠ‚ç </h3>
<ul>
<li>load ä»£è¡¨ä»æœ¬åœ°å˜é‡è¡¨åŠ è½½åˆ°æ ˆé‡Œ</li>
<li>store ä»£è¡¨ä»æ ˆå­˜å‚¨åˆ°æœ¬åœ°å˜é‡è¡¨é‡Œ</li>
</ul>
<p><img src="C:%5CUsers%5Cscau_%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210917232029573.png" alt="image-20210917232029573"></p>
<h3 id="å¤æ‚ç‚¹çš„ä¾‹å­">å¤æ‚ç‚¹çš„ä¾‹å­</h3>
<p>ä½¿ç”¨å‘½ä»¤:</p>
<ul>
<li>javap -c -verbose HelloByteCode.class</li>
</ul>
<p>ç›¸æ¯”äºä¸Šé¢çš„å‘½ä»¤ï¼Œå¤šäº†ç‰ˆæœ¬å·ï¼Œå¸¸é‡æ± çš„å†…å®¹ï¼Œå·²ç»æ¯è¡ŒæŒ‡ä»¤å¯¹åº”çš„åŸæ–‡ä»¶çš„è¡Œå·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">Classfile &#x2F;D:&#x2F;WorkSpace-IDEA&#x2F;LearnJVM&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;example&#x2F;HelloByteCode.class</span><br><span class="line">  Last modified 2021-9-17; size 300 bytes</span><br><span class="line">  MD5 checksum 1b2e06bacf3928137649a527eeef384a</span><br><span class="line">  Compiled from &quot;HelloByteCode.java&quot;</span><br><span class="line">public class org.example.HelloByteCode</span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: 52  &#x2F;&#x2F; java çš„ç‰ˆæœ¬ï¼Œå¦‚æœç‰ˆæœ¬å‡çº§ä¼šåŠ 1</span><br><span class="line">  flags: ACC_PUBLIC, ACC_SUPER &#x2F;&#x2F; ä»£è¡¨è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªpublicç±»ï¼Œè¿˜æ˜¯épublicç±»ï¼Œå°±æ˜¯è¡¨ç¤ºä¿®é¥°ç¬¦</span><br><span class="line">Constant pool: &#x2F;&#x2F; å¸¸é‡æ± é‡Œé¢å¼•ç”¨çš„æ‰€æœ‰å¸¸é‡</span><br><span class="line">   #1 &#x3D; Methodref          #4.#13         &#x2F;&#x2F; java&#x2F;lang&#x2F;Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">   #2 &#x3D; Class              #14            &#x2F;&#x2F; org&#x2F;example&#x2F;HelloByteCode</span><br><span class="line">   #3 &#x3D; Methodref          #2.#13         &#x2F;&#x2F; org&#x2F;example&#x2F;HelloByteCode.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">   #4 &#x3D; Class              #15            &#x2F;&#x2F; java&#x2F;lang&#x2F;Object</span><br><span class="line">   #5 &#x3D; Utf8               &lt;init&gt;</span><br><span class="line">   #6 &#x3D; Utf8               ()V</span><br><span class="line">   #7 &#x3D; Utf8               Code</span><br><span class="line">   #8 &#x3D; Utf8               LineNumberTable</span><br><span class="line">   #9 &#x3D; Utf8               main</span><br><span class="line">  #10 &#x3D; Utf8               ([Ljava&#x2F;lang&#x2F;String;)V</span><br><span class="line">  #11 &#x3D; Utf8               SourceFile</span><br><span class="line">  #12 &#x3D; Utf8               HelloByteCode.java</span><br><span class="line">  #13 &#x3D; NameAndType        #5:#6          &#x2F;&#x2F; &quot;&lt;init&gt;&quot;:()V</span><br><span class="line">  #14 &#x3D; Utf8               org&#x2F;example&#x2F;HelloByteCode</span><br><span class="line">  #15 &#x3D; Utf8               java&#x2F;lang&#x2F;Object</span><br><span class="line">&#123;</span><br><span class="line">  public org.example.HelloByteCode();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack&#x3D;1, locals&#x3D;1, args_size&#x3D;1   &#x2F;&#x2F;æŒ‡çš„æ˜¯éœ€è¦æ·±åº¦ä¸º1çš„æ ˆï¼Œé•¿åº¦ä¸º1çš„æœ¬åœ°å˜é‡è¡¨ï¼Œå‚æ•°é•¿åº¦æ˜¯1</span><br><span class="line">         0: aload_0</span><br><span class="line">         1: invokespecial #1                  &#x2F;&#x2F; Method java&#x2F;lang&#x2F;Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">         4: return</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 6: 0</span><br><span class="line"></span><br><span class="line">  public static void main(java.lang.String[]);</span><br><span class="line">    descriptor: ([Ljava&#x2F;lang&#x2F;String;)V</span><br><span class="line">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack&#x3D;2, locals&#x3D;2, args_size&#x3D;1</span><br><span class="line">         0: new           #2                  &#x2F;&#x2F; class org&#x2F;example&#x2F;HelloByteCode</span><br><span class="line">         3: dup</span><br><span class="line">         4: invokespecial #3                  &#x2F;&#x2F; Method &quot;&lt;init&gt;&quot;:()V</span><br><span class="line">         7: astore_1</span><br><span class="line">         8: return</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 8: 0</span><br><span class="line">        line 9: 8</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å­—èŠ‚ç çš„è¿è¡Œæ—¶ç»“æ„">å­—èŠ‚ç çš„è¿è¡Œæ—¶ç»“æ„</h3>
<p>JVMæ˜¯ä¸€å°åŸºäºæ ˆçš„è®¡ç®—æœºå™¨</p>
<p>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç‹¬å±äºè‡ªå·±çš„çº¿ç¨‹æ ˆï¼ˆJVM Stackï¼‰ï¼Œç”¨äºå­˜å‚¨æ ˆå¸§ï¼ˆFrameï¼‰</p>
<p>æ¯ä¸€æ¬¡æ–¹æ³•è°ƒç”¨ï¼ŒJVMéƒ½ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª<strong>æ ˆå¸§</strong></p>
<p>â€‹	<img src="C:%5CUsers%5Cscau_%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210917233321875.png" alt="image-20210917233321875"></p>
<ul>
<li>æ ˆå¸§ç”±<strong>æ“ä½œæ•°æ ˆ</strong>ï¼Œ<strong>å±€éƒ¨å˜é‡æ•°ç»„</strong>ä»¥åŠä¸€ä¸ª<strong>Classå¼•ç”¨</strong>ç»„æˆ</li>
<li>Classå¼•ç”¨æŒ‡å‘å½“å‰æ–¹æ³•åœ¨<strong>è¿è¡Œæ—¶å¸¸é‡æ± ä¸­å¯¹åº”çš„Class</strong></li>
</ul>
<h3 id="ä»åŠ©è®°ç¬¦åˆ°äºŒè¿›åˆ¶">ä»åŠ©è®°ç¬¦åˆ°äºŒè¿›åˆ¶</h3>
<p>å­—èŠ‚ç æ–‡ä»¶ç›´æ¥æ‰“å¼€æ˜¯16è¿›åˆ¶çš„ä¸€äº›æ•°ï¼Œä¸æ¸…æ¥šä»€ä¹ˆæ„ä¹‰ï¼ˆä¸å¯è¯»ï¼‰ã€‚æ‰€ä»¥javap å‘½ä»¤ï¼Œå°±å°†è¿™äº›16è¿›åˆ¶æ•°è½¬æˆåŠ©è®°ç¬¦ï¼Œæ˜¯å¯è¯»çš„ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦ç›´æ¥è¯»é‚£äº›16è¿›åˆ¶çš„æ•°ï¼Œå› ä¸ºåŠ©è®°ç¬¦å’Œè¿™äº›16è¿›åˆ¶æ•°æ˜¯ä¸€ä¸€å¯¹åº”çš„</p>
<h3 id="å››åˆ™è¿è¡Œçš„ä¾‹å­">å››åˆ™è¿è¡Œçš„ä¾‹å­</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç§»åŠ¨å¹³å‡æ•°</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MovingAverage</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> sum = <span class="number">0.00</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">submit</span><span class="params">(<span class="keyword">double</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.count++;</span><br><span class="line">        <span class="keyword">this</span>.sum += value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getAvg</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">0</span> == <span class="keyword">this</span>.count) <span class="keyword">return</span> <span class="keyword">this</span>.sum;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.sum / <span class="keyword">this</span>.count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LocalVariableTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MovingAverage ma = <span class="keyword">new</span> MovingAverage();</span><br><span class="line">        <span class="keyword">int</span> num1 = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> num2 = <span class="number">2</span>;</span><br><span class="line">        ma.submit(num1);</span><br><span class="line">        ma.submit(num2);</span><br><span class="line">        <span class="keyword">double</span> avg = ma.getAvg();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ•°å€¼å¤„ç†ä¸æœ¬åœ°å˜é‡è¡¨">æ•°å€¼å¤„ç†ä¸æœ¬åœ°å˜é‡è¡¨</h3>
<p>ç”Ÿæˆçš„ç»“æœåˆ†åˆ«å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">Classfile &#x2F;D:&#x2F;WorkSpace-IDEA&#x2F;LearnJVM&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;example&#x2F;org&#x2F;example&#x2F;LocalVariableTest.class</span><br><span class="line">  Last modified 2021-9-18; size 432 bytes</span><br><span class="line">  MD5 checksum eb42ba2a908cf07fed5f2aec6fbc252d</span><br><span class="line">  Compiled from &quot;LocalVariableTest.java&quot;</span><br><span class="line">public class org.example.LocalVariableTest</span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: 52</span><br><span class="line">  flags: ACC_PUBLIC, ACC_SUPER</span><br><span class="line">Constant pool:</span><br><span class="line">   #1 &#x3D; Methodref          #7.#16         &#x2F;&#x2F; java&#x2F;lang&#x2F;Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">   #2 &#x3D; Class              #17            &#x2F;&#x2F; org&#x2F;example&#x2F;MovingAverage</span><br><span class="line">   #3 &#x3D; Methodref          #2.#16         &#x2F;&#x2F; org&#x2F;example&#x2F;MovingAverage.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">   #4 &#x3D; Methodref          #2.#18         &#x2F;&#x2F; org&#x2F;example&#x2F;MovingAverage.submit:(D)V</span><br><span class="line">   #5 &#x3D; Methodref          #2.#19         &#x2F;&#x2F; org&#x2F;example&#x2F;MovingAverage.getAvg:()D</span><br><span class="line">   #6 &#x3D; Class              #20            &#x2F;&#x2F; org&#x2F;example&#x2F;LocalVariableTest</span><br><span class="line">   #7 &#x3D; Class              #21            &#x2F;&#x2F; java&#x2F;lang&#x2F;Object</span><br><span class="line">   #8 &#x3D; Utf8               &lt;init&gt;</span><br><span class="line">   #9 &#x3D; Utf8               ()V</span><br><span class="line">  #10 &#x3D; Utf8               Code</span><br><span class="line">  #11 &#x3D; Utf8               LineNumberTable</span><br><span class="line">  #12 &#x3D; Utf8               main</span><br><span class="line">  #13 &#x3D; Utf8               ([Ljava&#x2F;lang&#x2F;String;)V</span><br><span class="line">  #14 &#x3D; Utf8               SourceFile</span><br><span class="line">  #15 &#x3D; Utf8               LocalVariableTest.java</span><br><span class="line">  #16 &#x3D; NameAndType        #8:#9          &#x2F;&#x2F; &quot;&lt;init&gt;&quot;:()V</span><br><span class="line">  #17 &#x3D; Utf8               org&#x2F;example&#x2F;MovingAverage</span><br><span class="line">  #18 &#x3D; NameAndType        #22:#23        &#x2F;&#x2F; submit:(D)V</span><br><span class="line">  #19 &#x3D; NameAndType        #24:#25        &#x2F;&#x2F; getAvg:()D</span><br><span class="line">  #20 &#x3D; Utf8               org&#x2F;example&#x2F;LocalVariableTest</span><br><span class="line">  #21 &#x3D; Utf8               java&#x2F;lang&#x2F;Object</span><br><span class="line">  #22 &#x3D; Utf8               submit</span><br><span class="line">  #23 &#x3D; Utf8               (D)V</span><br><span class="line">  #24 &#x3D; Utf8               getAvg</span><br><span class="line">  #25 &#x3D; Utf8               ()D</span><br><span class="line">&#123;</span><br><span class="line">  public org.example.LocalVariableTest();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack&#x3D;1, locals&#x3D;1, args_size&#x3D;1</span><br><span class="line">         0: aload_0</span><br><span class="line">         1: invokespecial #1                  &#x2F;&#x2F; Method java&#x2F;lang&#x2F;Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">         4: return</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 3: 0</span><br><span class="line"></span><br><span class="line">  public static void main(java.lang.String[]);</span><br><span class="line">    descriptor: ([Ljava&#x2F;lang&#x2F;String;)V</span><br><span class="line">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack&#x3D;3, locals&#x3D;6, args_size&#x3D;1</span><br><span class="line">         0: new           #2                  &#x2F;&#x2F; class org&#x2F;example&#x2F;MovingAverage</span><br><span class="line">         3: dup</span><br><span class="line">         4: invokespecial #3                  &#x2F;&#x2F; Method org&#x2F;example&#x2F;MovingAverage.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">         7: astore_1</span><br><span class="line">         8: iconst_1</span><br><span class="line">         9: istore_2</span><br><span class="line">        10: iconst_2</span><br><span class="line">        11: istore_3</span><br><span class="line">        12: aload_1</span><br><span class="line">        13: iload_2</span><br><span class="line">        14: i2d</span><br><span class="line">        15: invokevirtual #4                  &#x2F;&#x2F; Method org&#x2F;example&#x2F;MovingAverage.submit:(D)V</span><br><span class="line">        18: aload_1</span><br><span class="line">        19: iload_3</span><br><span class="line">        20: i2d</span><br><span class="line">        21: invokevirtual #4                  &#x2F;&#x2F; Method org&#x2F;example&#x2F;MovingAverage.submit:(D)V</span><br><span class="line">        24: aload_1</span><br><span class="line">        25: invokevirtual #5                  &#x2F;&#x2F; Method org&#x2F;example&#x2F;MovingAverage.getAvg:()D</span><br><span class="line">        28: dstore        4</span><br><span class="line">        30: return</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 6: 0</span><br><span class="line">        line 7: 8</span><br><span class="line">        line 8: 10</span><br><span class="line">        line 9: 12</span><br><span class="line">        line 10: 18</span><br><span class="line">        line 11: 24</span><br><span class="line">        line 12: 30</span><br><span class="line">&#125;</span><br><span class="line">SourceFile: &quot;LocalVariableTest.java&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>iload_1 / istore_1 æ˜¯ä¸€ä¸ªç›¸å¯¹çš„æ“ä½œï¼Œæ“ä½œçš„æ˜¯intç±»å‹çš„æ•°ã€‚å’Œaload_1 /astore_1 å·®ä¸å¤šæ„æ€</p>
<p>iconst_1 æŒ‡çš„æ˜¯intå¸¸é‡ï¼Œå¸¸é‡çš„å€¼æ˜¯1</p>
<p>i2d å€¼å¾—æ˜¯int è½¬æˆ double</p>
<blockquote>
<p>å­—æ¯å¼€å¤´çš„å«ä¹‰</p>
<p>i  -&gt; int</p>
<p>d -&gt; double</p>
</blockquote>
<h3 id="ç®—æ•°æ“ä½œä¸ç±»å‹è½¬æ¢">ç®—æ•°æ“ä½œä¸ç±»å‹è½¬æ¢</h3>
<p><img src="C:%5CUsers%5Cscau_%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210918002521845.png" alt="image-20210918002521845"></p>
<h3 id="ä¸€ä¸ªå®Œæ•´çš„å¾ªç¯æ§åˆ¶">ä¸€ä¸ªå®Œæ•´çš„å¾ªç¯æ§åˆ¶</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForLoopTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] numbers = &#123;<span class="number">1</span>, <span class="number">6</span>, <span class="number">8</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MovingAverage ma = <span class="keyword">new</span> MovingAverage();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> number : numbers) &#123;</span><br><span class="line">            ma.submit(number);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">double</span> avg = ma.getAvg();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line">Classfile &#x2F;D:&#x2F;WorkSpace-IDEA&#x2F;LearnJVM&#x2F;src&#x2F;main&#x2F;java&#x2F;org&#x2F;example&#x2F;org&#x2F;example&#x2F;ForLoopTest.class</span><br><span class="line">  Last modified 2021-9-18; size 613 bytes</span><br><span class="line">  MD5 checksum b3cf624e347780fb8810618ef0723d5a</span><br><span class="line">  Compiled from &quot;ForLoopTest.java&quot;</span><br><span class="line">public class org.example.ForLoopTest</span><br><span class="line">  minor version: 0</span><br><span class="line">  major version: 52</span><br><span class="line">  flags: ACC_PUBLIC, ACC_SUPER</span><br><span class="line">Constant pool:</span><br><span class="line">   #1 &#x3D; Methodref          #8.#24         &#x2F;&#x2F; java&#x2F;lang&#x2F;Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">   #2 &#x3D; Class              #25            &#x2F;&#x2F; org&#x2F;example&#x2F;MovingAverage</span><br><span class="line">   #3 &#x3D; Methodref          #2.#24         &#x2F;&#x2F; org&#x2F;example&#x2F;MovingAverage.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">   #4 &#x3D; Fieldref           #7.#26         &#x2F;&#x2F; org&#x2F;example&#x2F;ForLoopTest.numbers:[I</span><br><span class="line">   #5 &#x3D; Methodref          #2.#27         &#x2F;&#x2F; org&#x2F;example&#x2F;MovingAverage.submit:(D)V</span><br><span class="line">   #6 &#x3D; Methodref          #2.#28         &#x2F;&#x2F; org&#x2F;example&#x2F;MovingAverage.getAvg:()D</span><br><span class="line">   #7 &#x3D; Class              #29            &#x2F;&#x2F; org&#x2F;example&#x2F;ForLoopTest</span><br><span class="line">   #8 &#x3D; Class              #30            &#x2F;&#x2F; java&#x2F;lang&#x2F;Object</span><br><span class="line">   #9 &#x3D; Utf8               numbers</span><br><span class="line">  #10 &#x3D; Utf8               [I</span><br><span class="line">  #11 &#x3D; Utf8               &lt;init&gt;</span><br><span class="line">  #12 &#x3D; Utf8               ()V</span><br><span class="line">  #13 &#x3D; Utf8               Code</span><br><span class="line">  #14 &#x3D; Utf8               LineNumberTable</span><br><span class="line">  #15 &#x3D; Utf8               main</span><br><span class="line">  #16 &#x3D; Utf8               ([Ljava&#x2F;lang&#x2F;String;)V</span><br><span class="line">  #17 &#x3D; Utf8               StackMapTable</span><br><span class="line">  #18 &#x3D; Class              #31            &#x2F;&#x2F; &quot;[Ljava&#x2F;lang&#x2F;String;&quot;</span><br><span class="line">  #19 &#x3D; Class              #25            &#x2F;&#x2F; org&#x2F;example&#x2F;MovingAverage</span><br><span class="line">  #20 &#x3D; Class              #10            &#x2F;&#x2F; &quot;[I&quot;</span><br><span class="line">  #21 &#x3D; Utf8               &lt;clinit&gt;</span><br><span class="line">  #22 &#x3D; Utf8               SourceFile</span><br><span class="line">  #23 &#x3D; Utf8               ForLoopTest.java</span><br><span class="line">  #24 &#x3D; NameAndType        #11:#12        &#x2F;&#x2F; &quot;&lt;init&gt;&quot;:()V</span><br><span class="line">  #25 &#x3D; Utf8               org&#x2F;example&#x2F;MovingAverage</span><br><span class="line">  #26 &#x3D; NameAndType        #9:#10         &#x2F;&#x2F; numbers:[I</span><br><span class="line">  #27 &#x3D; NameAndType        #32:#33        &#x2F;&#x2F; submit:(D)V</span><br><span class="line">  #28 &#x3D; NameAndType        #34:#35        &#x2F;&#x2F; getAvg:()D</span><br><span class="line">  #29 &#x3D; Utf8               org&#x2F;example&#x2F;ForLoopTest</span><br><span class="line">  #30 &#x3D; Utf8               java&#x2F;lang&#x2F;Object</span><br><span class="line">  #31 &#x3D; Utf8               [Ljava&#x2F;lang&#x2F;String;</span><br><span class="line">  #32 &#x3D; Utf8               submit</span><br><span class="line">  #33 &#x3D; Utf8               (D)V</span><br><span class="line">  #34 &#x3D; Utf8               getAvg</span><br><span class="line">  #35 &#x3D; Utf8               ()D</span><br><span class="line">&#123;</span><br><span class="line">  public org.example.ForLoopTest();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack&#x3D;1, locals&#x3D;1, args_size&#x3D;1</span><br><span class="line">         0: aload_0</span><br><span class="line">         1: invokespecial #1                  &#x2F;&#x2F; Method java&#x2F;lang&#x2F;Object.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">         4: return</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 3: 0</span><br><span class="line"></span><br><span class="line">  public static void main(java.lang.String[]);</span><br><span class="line">    descriptor: ([Ljava&#x2F;lang&#x2F;String;)V</span><br><span class="line">    flags: ACC_PUBLIC, ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack&#x3D;3, locals&#x3D;6, args_size&#x3D;1</span><br><span class="line">         0: new           #2                  &#x2F;&#x2F; class org&#x2F;example&#x2F;MovingAverage</span><br><span class="line">         3: dup</span><br><span class="line">         4: invokespecial #3                  &#x2F;&#x2F; Method org&#x2F;example&#x2F;MovingAverage.&quot;&lt;init&gt;&quot;:()V</span><br><span class="line">         7: astore_1</span><br><span class="line">         8: getstatic     #4                  &#x2F;&#x2F; Field numbers:[I</span><br><span class="line">        11: astore_2</span><br><span class="line">        12: aload_2</span><br><span class="line">        13: arraylength</span><br><span class="line">        14: istore_3</span><br><span class="line">        15: iconst_0</span><br><span class="line">        16: istore        4</span><br><span class="line">        18: iload         4</span><br><span class="line">        20: iload_3</span><br><span class="line">        21: if_icmpge     43</span><br><span class="line">        24: aload_2</span><br><span class="line">        25: iload         4</span><br><span class="line">        27: iaload</span><br><span class="line">        28: istore        5</span><br><span class="line">        30: aload_1</span><br><span class="line">        31: iload         5</span><br><span class="line">        33: i2d</span><br><span class="line">        34: invokevirtual #5                  &#x2F;&#x2F; Method org&#x2F;example&#x2F;MovingAverage.submit:(D)V</span><br><span class="line">        37: iinc          4, 1</span><br><span class="line">        40: goto          18</span><br><span class="line">        43: aload_1</span><br><span class="line">        44: invokevirtual #6                  &#x2F;&#x2F; Method org&#x2F;example&#x2F;MovingAverage.getAvg:()D</span><br><span class="line">        47: dstore_2</span><br><span class="line">        48: return</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 8: 0</span><br><span class="line">        line 9: 8</span><br><span class="line">        line 10: 30</span><br><span class="line">        line 9: 37</span><br><span class="line">        line 12: 43</span><br><span class="line">        line 13: 48</span><br><span class="line">      StackMapTable: number_of_entries &#x3D; 2</span><br><span class="line">        frame_type &#x3D; 255 &#x2F;* full_frame *&#x2F;</span><br><span class="line">          offset_delta &#x3D; 18</span><br><span class="line">          locals &#x3D; [ class &quot;[Ljava&#x2F;lang&#x2F;String;&quot;, class org&#x2F;example&#x2F;MovingAverage, class &quot;[I&quot;, int, int ]</span><br><span class="line">          stack &#x3D; []</span><br><span class="line">        frame_type &#x3D; 248 &#x2F;* chop *&#x2F;</span><br><span class="line">          offset_delta &#x3D; 24</span><br><span class="line"></span><br><span class="line">  static &#123;&#125;;</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_STATIC</span><br><span class="line">    Code:</span><br><span class="line">      stack&#x3D;4, locals&#x3D;0, args_size&#x3D;0</span><br><span class="line">         0: iconst_3</span><br><span class="line">         1: newarray       int</span><br><span class="line">         3: dup</span><br><span class="line">         4: iconst_0</span><br><span class="line">         5: iconst_1</span><br><span class="line">         6: iastore</span><br><span class="line">         7: dup</span><br><span class="line">         8: iconst_1</span><br><span class="line">         9: bipush        6</span><br><span class="line">        11: iastore</span><br><span class="line">        12: dup</span><br><span class="line">        13: iconst_2</span><br><span class="line">        14: bipush        8</span><br><span class="line">        16: iastore</span><br><span class="line">        17: putstatic     #4                  &#x2F;&#x2F; Field numbers:[I</span><br><span class="line">        20: return</span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line 5: 0</span><br><span class="line">&#125;</span><br><span class="line">SourceFile: &quot;ForLoopTest.java&quot;</span><br></pre></td></tr></table></figure>
<p>if_icmpgeï¼š ge æ¯”è¾ƒå¤§å°</p>
<p>iincï¼š intç±»å‹çš„è‡ªå¢</p>
<p>goto:  è·³è½¬åˆ°æŒ‡å®šçš„è¡Œæ•°</p>
<h3 id="æ–¹æ³•è°ƒç”¨çš„æŒ‡ä»¤">æ–¹æ³•è°ƒç”¨çš„æŒ‡ä»¤</h3>
<ul>
<li>invokestaticï¼šé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªæŒ‡ä»¤ç”¨äºè°ƒç”¨æŸä¸ªç±»çš„é™æ€æ–¹æ³•ï¼Œè¿™æ˜¯æ–¹æ³•è°ƒç”¨æŒ‡ä»¤ä¸­æœ€å¿«çš„ä¸€ä¸ªã€‚</li>
<li>invokespecialï¼šç”¨æ¥è°ƒç”¨æ„é€ å‡½æ•°ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨äºè°ƒç”¨åŒä¸€ä¸ªç±»ä¸­çš„ private æ–¹æ³•, ä»¥åŠå¯è§çš„è¶…ç±»æ–¹æ³•ã€‚</li>
<li>invokevirtualï¼šå¦‚æœæ˜¯å…·ä½“ç±»å‹çš„ç›®æ ‡å¯¹è±¡ï¼Œinvokevirtual ç”¨äºè°ƒç”¨å…¬å…±ï¼Œå—ä¿æŠ¤å’Œ package çº§çš„ç§æœ‰æ–¹æ³•ã€‚</li>
<li>invokeinterfaceï¼šå½“é€šè¿‡æ¥å£å¼•ç”¨æ¥è°ƒç”¨æ–¹æ³•æ—¶ï¼Œå°†ä¼šç¼–è¯‘ä¸º invokeinterface æŒ‡ä»¤ã€‚</li>
<li>invokedynamicï¼šJDK7 æ–°å¢åŠ çš„æŒ‡ä»¤ï¼Œæ˜¯å®ç°â€œåŠ¨æ€ç±»å‹è¯­è¨€â€ï¼ˆDynamically Typed Languageï¼‰æ”¯æŒè€Œè¿›è¡Œçš„å‡çº§æ”¹è¿›ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ JDK8 ä»¥åæ”¯æŒ lambda è¡¨è¾¾å¼çš„å®ç°åŸºç¡€ã€‚</li>
</ul>
<h2 id="JVM-ç±»åŠ è½½å™¨">JVM ç±»åŠ è½½å™¨</h2>
<h3 id="ä½œç”¨-2">ä½œç”¨</h3>
<p>å½“JVMéœ€è¦æŸç±»æ—¶ï¼Œå®ƒä¼šæ ¹æ®åç§°å‘ClassLoaderè¦æ±‚è¿™ä¸ªç±»ï¼Œç„¶åç”±ClassLoaderè¿”å› è¿™ä¸ªç±»çš„classå¯¹è±¡ã€‚</p>
<h3 id="å‚è€ƒèµ„æ–™-2">å‚è€ƒèµ„æ–™</h3>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/6844904114543919111">ç±»åŠ è½½å™¨</a></p>
<h3 id="ç±»çš„ç”Ÿå‘½å‘¨æœŸ">ç±»çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<p><img src="http://image.leonote.cn/20201030162432.png" alt=""></p>
<ol>
<li>
<p><strong>è£…è½½ï¼ˆloadingï¼‰</strong>ï¼š</p>
<p>è´Ÿè´£æ‰¾åˆ° Class æ–‡ä»¶å¹¶åŠ è½½è‡³ JVM ä¸­ï¼ŒJVM é€šè¿‡ç±»åã€ç±»æ‰€åœ¨çš„åŒ…åã€ClassLoaderå®Œæˆç±»çš„åŠ è½½ã€‚å› æ­¤ï¼Œæ ‡è¯†ä¸€ä¸ªè¢«åŠ è½½äº†çš„ç±»ï¼šç±»å + åŒ…å + ClassLoader å®ä¾‹ IDã€‚</p>
</li>
<li>
<p><strong>é“¾æ¥ï¼ˆlinkingï¼‰</strong>ï¼š</p>
<ol>
<li>
<p>éªŒè¯ï¼ˆVerifyingï¼‰ï¼šéªŒè¯ Class æ–‡ä»¶çš„æ ¼å¼ä»¥åŠä¾èµ–ï¼Œä¿è¯ JVM èƒ½å¤Ÿæ‰§è¡Œ</p>
</li>
<li>
<p>å‡†å¤‡ï¼ˆPreparingï¼‰ï¼šä¸ºç”± static ä¿®é¥°çš„æˆå‘˜å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶è®¾ç½®é»˜è®¤çš„åˆå§‹å€¼</p>
<p>é»˜è®¤åˆå§‹å€¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>å…«ç§åŸºæœ¬æ•°æ®ç±»å‹é»˜è®¤çš„åˆå§‹å€¼æ˜¯0</li>
<li>å¼•ç”¨ç±»å‹é»˜è®¤çš„åˆå§‹å€¼æ˜¯ null</li>
<li>æœ‰ static final ä¿®é¥°çš„ä¼šç›´æ¥èµ‹å€¼</li>
</ul>
</li>
<li>
<p>è§£æï¼ˆResolvingï¼‰ï¼šæŠŠå¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ã€‚</p>
<p>å³ JVM ä¼šå°†æ‰€æœ‰çš„ç±»æˆ–æ¥å£åã€å­—æ®µåã€æ–¹æ³•åè½¬æ¢ä¸ºå…·ä½“çš„å†…å­˜åœ°å€</p>
</li>
</ol>
</li>
<li>
<p><strong>åˆå§‹åŒ–ï¼ˆInitializingï¼‰</strong>ï¼š</p>
<p>è´Ÿè´£å°†ç±»ä¸­çš„é™æ€å˜é‡ï¼ˆç±»å˜é‡ï¼‰èµ‹å€¼çš„è¿‡ç¨‹ï¼Œå³åªæœ‰ static ä¿®é¥°çš„æ‰èƒ½è¢«åˆå§‹åŒ–ã€‚</p>
<blockquote>
<p>æ‰§è¡Œé¡ºåºï¼šçˆ¶ç±»é™æ€åŸŸæˆ–ç€é™æ€ä»£ç å—ï¼Œç„¶åæ˜¯å­ç±»é™æ€åŸŸæˆ–è€…å­ç±»é™æ€ä»£ç å—</p>
</blockquote>
</li>
<li>
<p><strong>ä½¿ç”¨ï¼ˆUsingï¼‰</strong>ï¼š</p>
<ol>
<li>
<p>å¯¹è±¡å®ä¾‹åŒ–ï¼šæ‰§è¡Œç±»ä¸­æ„é€ å‡½æ•°çš„å†…å®¹</p>
<p>å¦‚æœå­˜åœ¨çˆ¶ç±»ï¼ŒJVM ä¼šé€šè¿‡æ˜¾ç¤ºæˆ–è€…éšç¤ºçš„æ–¹å¼å…ˆæ‰§è¡Œçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œåœ¨å †å†…å­˜ä¸­ä¸ºçˆ¶ç±»çš„å®ä¾‹å˜é‡å¼€è¾Ÿç©ºé—´ï¼Œå¹¶èµ‹äºˆé»˜è®¤çš„åˆå§‹å€¼ï¼Œç„¶ååœ¨æ ¹æ®æ„é€ å‡½æ•°çš„ä»£ç å†…å®¹å°†çœŸæ­£çš„å€¼èµ‹äºˆå®ä¾‹å˜é‡æœ¬èº«ï¼Œç„¶åï¼Œå¼•ç”¨å˜é‡è·å–å¯¹è±¡çš„é¦–åœ°å€ï¼Œé€šè¿‡æ“ä½œå¯¹è±¡æ¥è°ƒç”¨å®ä¾‹å˜é‡å’Œæ–¹æ³•</p>
</li>
<li>
<p>åƒåœ¾æ”¶é›†ï¼šå½“å¯¹è±¡ä¸å†è¢«å¼•ç”¨çš„æ—¶å€™ï¼Œå°±ä¼šè¢«è™šæ‹Ÿæœºæ ‡ä¸Šç‰¹åˆ«çš„åƒåœ¾è®°å·ï¼Œåœ¨å †ä¸­ç­‰å¾… GC å›æ”¶</p>
</li>
<li>
<p>å¯¹è±¡ç»ˆç»“ï¼šå¯¹è±¡è¢« GC å›æ”¶åï¼Œå¯¹è±¡å°±ä¸å†å­˜åœ¨ï¼Œå¯¹è±¡çš„ç”Ÿå‘½ä¹Ÿå°±èµ°åˆ°äº†å°½å¤´</p>
</li>
</ol>
</li>
<li>
<p><strong>å¸è½½ï¼ˆUnloadingï¼‰</strong>ï¼š</p>
<p>å³ç±»çš„ç”Ÿå‘½å‘¨æœŸèµ°åˆ°äº†æœ€åä¸€æ­¥ï¼Œç¨‹åºä¸­ä¸å†æœ‰è¯¥ç±»çš„å¼•ç”¨ï¼Œè¯¥ç±»ä¹Ÿå°±ä¼šè¢« JVM æ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œä»æ­¤ç”Ÿå‘½ç»“æŸâ€¦</p>
</li>
</ol>
<h3 id="ç±»åˆå§‹åŒ–é¡ºåº">ç±»åˆå§‹åŒ–é¡ºåº</h3>
<blockquote>
<p>ç±»åˆå§‹åŒ–çš„ä¸€äº›è§„åˆ™ï¼š</p>
<ol>
<li>ç±»ä»é¡¶è‡³åº•çš„é¡ºåºåˆå§‹åŒ–ï¼Œæ‰€ä»¥å£°æ˜åœ¨é¡¶éƒ¨çš„å­—æ®µçš„æ—©äºåº•éƒ¨çš„å­—æ®µåˆå§‹åŒ–</li>
<li>è¶…ç±»æ—©äºå­ç±»å’Œè¡ç”Ÿç±»çš„åˆå§‹åŒ–</li>
<li>å¦‚æœç±»çš„åˆå§‹åŒ–æ˜¯ç”±äºè®¿é—®é™æ€åŸŸè€Œè§¦å‘ï¼Œé‚£ä¹ˆåªæœ‰å£°æ˜é™æ€åŸŸçš„ç±»æ‰è¢«åˆå§‹åŒ–ï¼Œè€Œä¸ä¼šè§¦å‘è¶…ç±»çš„åˆå§‹åŒ–æˆ–è€…å­ç±»çš„</li>
<li>åˆå§‹åŒ–å³ä½¿é™æ€åŸŸè¢«å­ç±»æˆ–å­æ¥å£æˆ–è€…å®ƒçš„å®ç°ç±»æ‰€å¼•ç”¨</li>
<li>æ¥å£åˆå§‹åŒ–ä¸ä¼šå¯¼è‡´çˆ¶æ¥å£çš„åˆå§‹åŒ–</li>
<li>é™æ€åŸŸçš„åˆå§‹åŒ–æ˜¯åœ¨ç±»çš„é™æ€åˆå§‹åŒ–æœŸé—´ï¼Œéé™æ€åŸŸçš„åˆå§‹åŒ–æ—¶åœ¨ç±»çš„å®ä¾‹åˆ›å»ºæœŸé—´ã€‚è¿™æ„å‘³è¿™é™æ€åŸŸåˆå§‹åŒ–åœ¨éé™æ€åŸŸä¹‹å‰</li>
<li>éé™æ€åŸŸé€šè¿‡æ„é€ å™¨åˆå§‹åŒ–ï¼Œå­ç±»åœ¨åšä»»ä½•åˆå§‹åŒ–ä¹‹å‰æ„é€ å™¨ä¼šéšå«åœ°è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨ï¼Œä»–ä¿è¯äº†éé™æ€æˆ–å®ä¾‹å˜é‡ï¼ˆçˆ¶ç±»ï¼‰åˆå§‹åŒ–æ—©äºå­ç±»</li>
</ol>
</blockquote>
<h3 id="ç±»çš„åˆå§‹åŒ–æ—¶æœº">ç±»çš„åˆå§‹åŒ–æ—¶æœº</h3>
<ol>
<li>å½“è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œåˆå§‹åŒ–ç”¨æˆ·æŒ‡å®šçš„ä¸»ç±»ï¼Œå°±æ˜¯å¯åŠ¨æ‰§è¡Œçš„ main æ–¹æ³•æ‰€åœ¨çš„ç±»ï¼›</li>
<li>å½“é‡åˆ°ç”¨ä»¥æ–°å»ºç›®æ ‡ç±»å®ä¾‹çš„ new æŒ‡ä»¤æ—¶ï¼Œåˆå§‹åŒ– new æŒ‡ä»¤çš„ç›®æ ‡ç±»ï¼Œå°±æ˜¯ new ä¸€ä¸ªç±»çš„æ—¶å€™è¦åˆå§‹åŒ–ï¼›</li>
<li>å½“é‡åˆ°è°ƒç”¨é™æ€æ–¹æ³•çš„æŒ‡ä»¤æ—¶ï¼Œåˆå§‹åŒ–è¯¥é™æ€æ–¹æ³•æ‰€åœ¨çš„ç±»ï¼›</li>
<li>å½“é‡åˆ°è®¿é—®é™æ€å­—æ®µçš„æŒ‡ä»¤æ—¶ï¼Œåˆå§‹åŒ–è¯¥é™æ€å­—æ®µæ‰€åœ¨çš„ç±»ï¼›</li>
<li>å­ç±»çš„åˆå§‹åŒ–ä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–ï¼›</li>
<li>å¦‚æœä¸€ä¸ªæ¥å£å®šä¹‰äº† default æ–¹æ³•ï¼Œé‚£ä¹ˆç›´æ¥å®ç°æˆ–è€…é—´æ¥å®ç°è¯¥æ¥å£çš„ç±»çš„åˆå§‹åŒ–ï¼Œ ä¼š è§¦å‘è¯¥æ¥å£çš„åˆå§‹åŒ–ï¼›</li>
<li>ä½¿ç”¨åå°„ API å¯¹æŸä¸ªç±»è¿›è¡Œåå°„è°ƒç”¨æ—¶ï¼Œåˆå§‹åŒ–è¿™ä¸ªç±»ï¼Œå…¶å®è·Ÿå‰é¢ä¸€æ ·ï¼Œåå°„è°ƒç”¨ è¦ä¹ˆæ˜¯å·²ç»æœ‰å®ä¾‹äº†ï¼Œè¦ä¹ˆæ˜¯é™æ€æ–¹æ³•ï¼Œéƒ½éœ€è¦åˆå§‹åŒ–ï¼›</li>
<li>å½“åˆæ¬¡è°ƒç”¨ MethodHandle å®ä¾‹æ—¶ï¼Œåˆå§‹åŒ–è¯¥ MethodHandle æŒ‡å‘çš„æ–¹æ³•æ‰€åœ¨çš„ç±»ã€‚</li>
</ol>
<h3 id="ä¸ä¼šåˆå§‹åŒ–ï¼ˆå¯èƒ½ä¼šåŠ è½½ï¼‰">ä¸ä¼šåˆå§‹åŒ–ï¼ˆå¯èƒ½ä¼šåŠ è½½ï¼‰</h3>
<ol>
<li>é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å­—æ®µï¼Œåªä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–ï¼Œè€Œä¸ä¼šå‡ºå‘å­ç±»çš„åˆå§‹åŒ–ã€‚</li>
<li>å®šä¹‰å¯¹è±¡æ•°ç»„ï¼Œä¸ä¼šè§¦å‘è¯¥ç±»çš„åˆå§‹åŒ–ã€‚</li>
<li>å¸¸é‡åœ¨ç¼–è¯‘æœŸé—´ä¼šå­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­ï¼Œæœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ç›´æ¥å¼•ç”¨å®šä¹‰å¸¸é‡çš„ç±»ã€‚ä¸ä¼šè§¦å‘å®šä¹‰å¸¸é‡æ‰€åœ¨çš„ç±»ã€‚</li>
<li>é€šè¿‡ç±»åè·å–Classå¯¹è±¡ï¼Œä¸ä¼šè§¦å‘ç±»çš„åˆå§‹åŒ–ï¼ŒHello.classä¸ä¼šè®©Helloç±»åˆå§‹åŒ–ã€‚</li>
<li>é€šè¿‡Class.forNameåŠ è½½æŒ‡å®šç±»æ—¶ï¼Œå¦‚æœæŒ‡å®šå‚æ•°initializeä¸ºfalseæ—¶ï¼Œä¹Ÿä¸ä¼šè§¦å‘ç±»åˆå§‹åŒ–ï¼Œå…¶å®è¿™ä¸ªå‚æ•°æ˜¯å‘Šè¯‰è™šæ‹Ÿæœºï¼Œæ˜¯å¦è¦å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ã€‚Class.forName(â€œjvm.Helloâ€) é»˜è®¤ä¼šåŠ è½½Helloç±»ã€‚</li>
<li>é€šè¿‡ClassLoaderé»˜è®¤çš„loadClassæ–¹æ³•ï¼Œä¹Ÿä¸ä¼šè§¦å‘åˆå§‹åŒ–åŠ¨ä½œï¼ˆåŠ è½½äº†ï¼Œä½†æ˜¯ä¸åˆå§‹åŒ–ï¼‰ã€‚</li>
</ol>
<h3 id="ä¸‰ç±»åŠ è½½å™¨">ä¸‰ç±»åŠ è½½å™¨</h3>
<ol>
<li>å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrapClassLoaderï¼‰</li>
<li>æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtClassLoaderï¼‰ â€“ jar class</li>
<li>åº”ç”¨ç±»åŠ è½½å™¨ï¼ˆAppClassLoaderï¼‰ â€“ è‡ªå·±å†™çš„ç±»</li>
</ol>
<p>åŠ è½½å™¨ç‰¹ç‚¹ï¼š</p>
<ol>
<li>åŒäº²å§”æ‰˜</li>
<li>è´Ÿè´£ä¾èµ–</li>
<li>ç¼“å­˜åŠ è½½</li>
</ol>
<h3 id="æ˜¾ç¤ºå½“å‰-ClassLoader-åŠ è½½äº†å“ªäº›-Jar">æ˜¾ç¤ºå½“å‰ ClassLoader åŠ è½½äº†å“ªäº› Jar?</h3>
<h3 id="è‡ªå®šä¹‰-ClassLoader">è‡ªå®šä¹‰ ClassLoader</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClassloader</span> <span class="keyword">extends</span> <span class="title">ClassLoader</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String CLASS_NAME = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String METHOD_NAME = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String RESOURCE_NAME = <span class="string">&quot;Hello.xlass&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@SneakyThrows(Exception.class)</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Class&lt;?&gt; hello = <span class="keyword">new</span> MyClassloader().findClass(CLASS_NAME);</span><br><span class="line">    hello.getMethod(METHOD_NAME).invoke(hello.newInstance());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="meta">@SneakyThrows(Exception.class)</span></span><br><span class="line">  <span class="keyword">protected</span> Class&lt;?&gt; findClass(String name) &#123;</span><br><span class="line">    <span class="meta">@Cleanup</span></span><br><span class="line">    InputStream in = MyClassloader.class.getClassLoader().getResourceAsStream(RESOURCE_NAME);</span><br><span class="line">    Preconditions.checkNotNull(in);</span><br><span class="line">    <span class="keyword">byte</span>[] bytes = IoUtil.read(in).toByteArray();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; bytes.length; i++) &#123;</span><br><span class="line">      bytes[i] = (<span class="keyword">byte</span>) (<span class="number">255</span> - bytes[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> defineClass(name, bytes, <span class="number">0</span>, bytes.length);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ·»åŠ å¼•ç”¨ç±»çš„å‡ ç§æ–¹å¼">æ·»åŠ å¼•ç”¨ç±»çš„å‡ ç§æ–¹å¼</h3>
<ol>
<li>æ”¾åˆ°JDKçš„lib/extä¸‹ï¼Œæˆ–è€…-Djava.ext.dirs   // è¿™ä¸ªæ˜¯å°†ç±»åŠ è½½åˆ°æ‹“å±•ç±»åŠ è½½å™¨ä¸Š</li>
<li>java -cp/classpath æˆ–è€… class æ–‡ä»¶æ”¾åˆ°å½“å‰è·¯å¾„</li>
<li>è‡ªå®šä¹‰ClassLoaderåŠ è½½</li>
<li>æ‹¿åˆ°å½“å‰æ‰§è¡Œç±»çš„ClassLoaderï¼Œåå°„è°ƒç”¨addUrlæ–¹æ³•æ·»åŠ Jaræˆ–è€…è·¯å¾„(JDK9æ— æ•ˆ)</li>
</ol>
<h2 id="JVM-å†…å­˜æ¨¡å‹">JVM å†…å­˜æ¨¡å‹</h2>
<p><img src="http://image.leonote.cn/20210923141303.png" alt="JVMå†…å­˜ç»“æ„"></p>
<h3 id="JVM-å†…å­˜ç»“æ„">JVM å†…å­˜ç»“æ„</h3>
<p><img src="C:%5CUsers%5Cscau_%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210918105031549.png" alt="image-20210918105031549"></p>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹éƒ½åªèƒ½è®¿é—®è‡ªå·±çš„çº¿ç¨‹æ ˆ</li>
<li>æ¯ä¸ªçº¿ç¨‹éƒ½ä¸èƒ½è®¿é—®ï¼ˆçœ‹ä¸è§ï¼‰å…¶ä»–çº¿ç¨‹çš„å±€éƒ¨å˜é‡ã€‚</li>
<li>æ‰€æœ‰åŸç”Ÿç±»å‹çš„å±€éƒ¨å˜é‡éƒ½å­˜å‚¨åœ¨çº¿ç¨‹æ ˆä¸­ï¼Œå› æ­¤å¯¹å…¶ä»–çº¿ç¨‹æ˜¯ä¸å¯è§çš„ã€‚</li>
<li>çº¿ç¨‹å¯ä»¥å°†ä¸€ä¸ªåŸç”Ÿå˜é‡å€¼çš„å‰¯æœ¬ä¼ ç»™å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†ä¸èƒ½å…±äº«åŸç”Ÿå±€éƒ¨å˜é‡æœ¬èº«ã€‚</li>
<li>å †å†…å­˜ä¸­åŒ…å«äº†Javaä»£ç ä¸­åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡ï¼Œä¸ç®¡æ˜¯å“ªä¸ªçº¿ç¨‹åˆ›å»ºçš„ã€‚å…¶ä¸­ä¹Ÿæ¶µç›–äº†åŒ…è£…ç±»å‹ï¼ˆä¾‹å¦‚ Byteï¼ŒIntegerï¼ŒLongç­‰ï¼‰ã€‚</li>
<li>ä¸ç®¡æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶å°†å…¶èµ‹å€¼ç»™å±€éƒ¨å˜é‡ï¼Œè¿˜æ˜¯èµ‹å€¼ç»™å¦ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œåˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šè¢«ä¿å­˜åˆ°å †å†…å­˜ä¸­ã€‚</li>
</ul>
<p><img src="C:%5CUsers%5Cscau_%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210918105647410.png" alt="image-20210918105647410"></p>
<ul>
<li>å¦‚æœæ˜¯åŸç”Ÿæ•°æ®ç±»å‹çš„å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆå®ƒçš„å†…å®¹å°±å…¨éƒ¨ä¿ç•™åœ¨çº¿ç¨‹æ ˆä¸Šã€‚</li>
<li>å¦‚æœæ˜¯å¯¹è±¡å¼•ç”¨ï¼Œåˆ™æ ˆä¸­çš„å±€éƒ¨å˜é‡æ§½ä½ä¸­ä¿å­˜ç€å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œè€Œå®é™…çš„å¯¹è±¡å†…å®¹ä¿å­˜åœ¨å †ä¸­ã€‚</li>
<li>å¯¹è±¡çš„æˆå‘˜å˜é‡ä¸å¯¹è±¡æœ¬èº«ä¸€èµ·å­˜å‚¨åœ¨å †ä¸Šï¼Œä¸ç®¡æˆå‘˜å˜é‡çš„ç±»å‹æ˜¯åŸç”Ÿæ•°å€¼ï¼Œè¿˜æ˜¯å¯¹è±¡å¼•ç”¨ã€‚</li>
<li>ç±»çš„é™æ€å˜é‡åˆ™å’Œç±»å®šä¹‰ä¸€æ ·éƒ½ä¿å­˜åœ¨å †ä¸­ã€‚</li>
</ul>
<h3 id="JVM-å†…å­˜æ•´ä½“ç»“æ„">JVM å†…å­˜æ•´ä½“ç»“æ„</h3>
<p><img src="C:%5CUsers%5Cscau_%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210918110804409.png" alt="image-20210918110804409"></p>
<p>æ¯å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼ŒJVMå°±ä¼šåœ¨å ç©ºé—´æ ˆåˆ†é…å¯¹åº”çš„çº¿ç¨‹æ ˆï¼Œæ¯”å¦‚1MBçš„ç©ºé—´ï¼ˆ-Xss1mï¼‰ã€‚</p>
<p>çº¿ç¨‹æ ˆä¹Ÿå«åšJavaæ–¹æ³•æ ˆã€‚å¦‚æœä½¿ç”¨äº†JNIæ–¹æ³•ï¼Œåˆ™ä¼šåˆ†é…ä¸€ä¸ªå•ç‹¬çš„æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Stackï¼‰ã€‚</p>
<p>çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬ä¼šæœ‰å¤šä¸ªæ–¹æ³•ç»„æˆè°ƒç”¨æ ˆï¼ˆStack Traceï¼‰ï¼Œæ¯”å¦‚Aè°ƒç”¨Bï¼ŒBè°ƒç”¨Cã€‚ã€‚ã€‚æ¯æ‰§è¡Œåˆ°ä¸€ä¸ªæ–¹æ³•ï¼Œå°±ä¼šåˆ›å»ºå¯¹åº”çš„æ ˆå¸§ï¼ˆFrameï¼‰</p>
<h3 id="JVM-æ ˆå†…å­˜ç»“æ„">JVM æ ˆå†…å­˜ç»“æ„</h3>
<p><img src="C:%5CUsers%5Cscau_%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210918112128511.png" alt="image-20210918112128511"></p>
<p>æ ˆå¸§æ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œå…·ä½“çš„å¤§å°åœ¨ä¸€ä¸ªæ–¹æ³•ç¼–å†™å®ŒæˆååŸºæœ¬ä¸Šå°±èƒ½ç¡®å®šã€‚</p>
<p>æ¯”å¦‚è¿”å›å€¼éœ€è¦æœ‰ä¸€ä¸ªç©ºé—´å­˜æ”¾å§ï¼Œæ¯ä¸ªå±€éƒ¨å˜é‡éƒ½éœ€è¦å¯¹åº”çš„åœ°å€ç©ºé—´ï¼Œæ­¤å¤–è¿˜æœ‰ç»™æŒ‡ä»¤ä½¿ç”¨çš„æ“ä½œæ•°æ ˆï¼Œä»¥åŠclassæŒ‡é’ˆï¼ˆæ ‡è¯†è¿™ä¸ªæ ˆå¸§å¯¹åº”çš„æ˜¯å“ªä¸ªç±»çš„æ–¹æ³•ï¼ŒæŒ‡å‘éå †é‡Œé¢çš„Classå¯¹è±¡ï¼‰ã€‚</p>
<h3 id="JVMå †å†…å­˜ç»“æ„">JVMå †å†…å­˜ç»“æ„</h3>
<p><img src="C:%5CUsers%5Cscau_%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210918112524646.png" alt="image-20210918112524646"></p>
<p>å †å†…å­˜æ˜¯æ‰€æœ‰çº¿ç¨‹å…±ç”¨çš„å†…å­˜ç©ºé—´ï¼ŒJVMå°†Heapå†…å­˜åˆ†ä¸º<strong>å¹´è½»ä»£</strong>ï¼ˆYoung generationï¼‰å’Œ<strong>è€å¹´ä»£</strong>ï¼ˆOld generationï¼Œä¹Ÿå«Tenuredï¼‰ä¸¤éƒ¨åˆ†ã€‚</p>
<p>å¹´è½»ä»£è¿˜åˆ’åˆ†ä¸º3ä¸ªå†…å­˜æ± ï¼Œ<strong>æ–°ç”Ÿä»£</strong>ï¼ˆEden spaceï¼‰å’Œ<strong>å­˜æ´»åŒº</strong>ï¼ˆSurvivor spaceï¼‰ï¼Œåœ¨å¤§éƒ¨åˆ†GCç®—æ³•ä¸­æœ‰2ä¸ªå­˜æ´»åŒºï¼ˆS0ï¼ŒS1)ï¼Œåœ¨æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°çš„ä»»ä½•æ—¶åˆ»ï¼ŒS0å’ŒS1æ€»æœ‰ä¸€ä¸ªæ˜¯ç©ºçš„ï¼Œä½†ä¸€èˆ¬è¾ƒå°ï¼Œä¹Ÿä¸æµªè´¹å¤šå°‘ç©ºé—´ã€‚</p>
<p>Non-Heapæœ¬è´¨ä¸Šè¿˜æ˜¯Heapï¼Œåªæ˜¯ä¸€èˆ¬ä¸å½’GCç®¡ç†ï¼Œé‡Œé¢åˆ’åˆ†ä¸º3ä¸ªå†…å­˜æ± ã€‚</p>
<ul>
<li>Metaspaceï¼Œä»¥å‰å«æŒä¹…ä»£ï¼ˆæ°¸ä¹…ä»£ï¼ŒPermanent generationï¼‰ï¼ŒJava8æ¢äº†ä¸ªåå­—å«Metaspaceã€‚</li>
<li>CCSï¼ŒCompressed Class Spaceï¼Œå­˜æ”¾classä¿¡æ¯çš„ï¼Œå’ŒMetaspace æœ‰äº¤å‰ã€‚</li>
<li>Code Cacheï¼Œå­˜æ”¾JITç¼–è¯‘å™¨ç¼–è¯‘åçš„æœ¬åœ°æœºå™¨ä»£ç ã€‚</li>
</ul>
<h3 id="CPUä¸å†…å­˜è¡Œä¸º">CPUä¸å†…å­˜è¡Œä¸º</h3>
<p><img src="C:%5CUsers%5Cscau_%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210918121019230.png" alt="image-20210918121019230"></p>
<ul>
<li>CPU ä¹±åºæ‰§è¡Œ</li>
<li>volatile å…³é”®å­—</li>
<li>åŸå­æ€§æ“ä½œ</li>
<li>å†…å­˜å±éšœ</li>
</ul>
<h3 id="å°ç»“ï¼šä»€ä¹ˆæ˜¯-JMM">å°ç»“ï¼šä»€ä¹ˆæ˜¯ JMM ?</h3>
<p>JMM æ˜¯ java å†…å­˜æ¨¡å‹ ï¼ˆJava Memory Modelï¼‰ç¼©å†™</p>
<p>JMMè§„èŒƒå¯¹åº”çš„æ˜¯&quot;[JSR-133ï¼ŒJava Memory Model and Thread Specification]&quot;ï¼Œã€ŠJava è¯­è¨€è§„èŒƒã€‹ çš„[$17.4. Memory Modelç« èŠ‚]</p>
<p>JMM è§„èŒƒæ˜ç¡®å®šä¹‰äº†ä¸åŒçš„çº¿ç¨‹ä¹‹é—´ï¼Œé€šè¿‡å“ªäº›æ–¹å¼ï¼Œåœ¨ä»€ä¹ˆæ—¶å€™å¯ä»¥çœ‹è§å…¶ä»–çº¿ç¨‹ä¿å­˜åˆ°å…±äº«å˜é‡çš„å€¼ï¼šä»¥åŠåœ¨å¿…è¦æ—¶ï¼Œå¦‚ä½•å¯¹å…±äº«å˜é‡çš„è®¿é—®è¿›è¡ŒåŒæ­¥ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯å±è”½å„ç§ç¡¬ä»¶å¹³å°å’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œå®ç°äº†å¹¶å‘ç¨‹åºçœŸæ­£çš„è·¨å¹³å°ã€‚</p>
<p>æ‰€æœ‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬å†…éƒ¨çš„å®ä¾‹æˆå‘˜å˜é‡ï¼‰ï¼Œstatic å˜é‡ï¼Œä»¥åŠæ•°ç»„ï¼Œéƒ½å¿…é¡»å­˜æ”¾åˆ°å †å†…å­˜ä¸­ã€‚</p>
<p>å±€éƒ¨å˜é‡ï¼Œæ–¹æ³•çš„å½¢å‚/å…¥å‚ï¼Œå¼‚å¸¸å¤„ç†è¯­å¥çš„å…¥å‚ä¸å…è®¸åœ¨çº¿ç¨‹ä¹‹é—´å…±äº«ï¼Œæ‰€ä»¥ä¸å—å†…å­˜æ¨¡å‹çš„å½±å“ã€‚</p>
<p>å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªå˜é‡è®¿é—®æ—¶ã€è¯»å–/å†™å…¥ã€‘ï¼Œè¿™æ—¶å€™åªè¦æœ‰æŸä¸ªçº¿ç¨‹æ‰§è¡Œçš„æ˜¯å†™æ“ä½œï¼Œé‚£ä¹ˆè¿™ç§ç°è±¡å°±ç§°ä¹‹ä¸ºâ€œå†²çªâ€ã€‚</p>
<p>å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹å½±å“æˆ–æ„ŸçŸ¥çš„æ“ä½œï¼Œç§°ä¸ºçº¿ç¨‹é—´çš„äº¤äº’è¡Œä¸ºï¼Œå¯åˆ†ä¸ºï¼šè¯»å–ã€å†™å…¥ã€åŒæ­¥æ“ä½œã€å¤–éƒ¨æ“ä½œç­‰ç­‰ã€‚å…¶ä¸­åŒæ­¥æ“ä½œåŒ…æ‹¬ï¼šå¯¹volatile å˜é‡çš„è¯»å†™ï¼Œå¯¹ç®¡ç¨‹ï¼ˆmonitorï¼‰çš„é”å®šä¸è§£é”ï¼Œçº¿ç¨‹çš„èµ·å§‹æ“ä½œä¸ç»“å°¾æ“ä½œï¼Œçº¿ç¨‹å¯åŠ¨å’Œç»“æŸç­‰ç­‰ã€‚å¤–éƒ¨æ“ä½œåˆ™æ˜¯æŒ‡å¯¹çº¿ç¨‹æ‰§è¡Œç¯å¢ƒä¹‹å¤–çš„æ“ä½œï¼Œæ¯”å¦‚åœæ­¢å…¶ä»–çº¿ç¨‹ç­‰ç­‰ã€‚</p>
<p>JMMè§„èŒƒçš„æ˜¯çº¿ç¨‹é—´çš„äº¤äº’æ“ä½œï¼Œè€Œä¸ç®¡çº¿ç¨‹å†…éƒ¨å¯¹å±€éƒ¨å˜é‡è¿›è¡Œçš„æ“ä½œã€‚</p>
<h2 id="JVM-å¯åŠ¨å‚æ•°">JVM å¯åŠ¨å‚æ•°</h2>
<p><img src="C:%5CUsers%5Cscau_%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210918123505959.png" alt="image-20210918123505959"></p>
<p><img src="C:%5CUsers%5Cscau_%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210918124316852.png" alt="image-20210918124316852"></p>
<ul>
<li>
<p>**-**å¼€å¤´ä¸ºæ ‡å‡†å‚æ•°ï¼Œæ‰€æœ‰çš„JVMéƒ½è¦å®ç°è¿™äº›å‚æ•°ï¼Œå¹¶ä¸”å‘åå…¼å®¹ã€‚</p>
</li>
<li>
<p><strong>-D</strong> è®¾ç½®ç³»ç»Ÿå±æ€§ã€‚(ç¯å¢ƒå˜é‡)</p>
</li>
<li>
<p><strong>-X</strong> å¼€å¤´ä¸ºéæ ‡å‡†å‚æ•°ï¼ŒåŸºæœ¬éƒ½æ˜¯ä¼ ç»™ JVM çš„ï¼Œé»˜è®¤ JVM å®ç°è¿™äº›å‚æ•°çš„åŠŸèƒ½ï¼Œä½†æ˜¯å¹¶ä¸ä¿è¯æ‰€æœ‰JVMå®ç°éƒ½æ»¡è¶³ï¼Œä¸”ä¸ä¿è¯å‘åå…¼å®¹ã€‚å¯ä»¥ä½¿ç”¨ java -X å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰ JVM æ”¯æŒçš„éæ ‡å‡†å‚æ•°ã€‚</p>
</li>
<li>
<p><strong>-XX</strong> å¼€å¤´ä¸ºéç¨³å®šå‚æ•°ï¼Œä¸“é—¨ç”¨äºæ§åˆ¶JVMçš„è¡Œä¸ºï¼Œè·Ÿå…·ä½“çš„JVMå®ç°æœ‰å…³ï¼Œéšæ—¶å¯èƒ½ä¼šåœ¨ä¸‹ä¸ªç‰ˆæœ¬å–æ¶ˆã€‚</p>
<ul>
<li>**-XX:Â±**Flagså½¢å¼ï¼ŒÂ±æ˜¯å¯¹å¸ƒå°”å€¼è¿›è¡Œå¼€å…³ã€‚</li>
<li><strong>-XX:key=value</strong> å½¢å¼ï¼ŒæŒ‡å®šæŸä¸ªé€‰é¡¹çš„å€¼ã€‚</li>
</ul>
</li>
</ul>
<h3 id="å¯åŠ¨å‚æ•°åˆ†ç±»">å¯åŠ¨å‚æ•°åˆ†ç±»</h3>
<h4 id="ç³»ç»Ÿå±æ€§å‚æ•°">ç³»ç»Ÿå±æ€§å‚æ•°</h4>
<ul>
<li>-Dfile.encoding=UTF-8</li>
<li>-Duser.timezone=GMT+08</li>
<li>-Dmaven.test.skip=true</li>
<li>-Dio.netty.eventLoopThreads=8</li>
</ul>
<p>System.setProperty(â€œaâ€, â€œA100â€);</p>
<p>String a = System.getProperty(â€œaâ€);</p>
<h4 id="è¿è¡Œæ¨¡å¼å‚æ•°">è¿è¡Œæ¨¡å¼å‚æ•°</h4>
<ol>
<li>-serverï¼šè®¾ç½®JVMä½¿ç”¨serveræ¨¡å¼ï¼Œç‰¹ç‚¹æ˜¯å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œä½†è¿è¡Œæ—¶æ€§èƒ½å’Œå†…å­˜ç®¡ç†æ•ˆç‡å¾ˆé«˜ï¼Œé€‚ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚åœ¨å…·æœ‰64ä½èƒ½åŠ›çš„JDKç¯å¢ƒä¸‹å°†é»˜è®¤å¯ç”¨è¯¥æ¨¡å¼ï¼Œè€Œå¿½ç•¥-clientå‚æ•°ã€‚</li>
<li>-clientï¼šJDK1.7ä¹‹å‰åœ¨32ä½çš„x86æœºå™¨ä¸Šçš„é»˜è®¤å€¼æ˜¯-clienté€‰é¡¹ã€‚è®¾ç½®JVMä½¿ç”¨clientæ¨¡å¼ï¼Œç‰¹ç‚¹æ˜¯å¯åŠ¨é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œä½†è¿è¡Œæ—¶æ€§èƒ½å’Œå†…å­˜ç®¡ç†æ•ˆç‡ä¸é«˜ï¼Œé€šå¸¸ç”¨äºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæˆ–è€…PCåº”ç”¨å¼€å‘å’Œè°ƒè¯•ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çŸ¥é“JVMåŠ è½½å­—èŠ‚ç åï¼Œå¯ä»¥è§£é‡Šæ‰§è¡Œï¼Œä¹Ÿå¯ä»¥ç¼–è¯‘æˆæœ¬åœ°ä»£ç å†æ‰§è¡Œï¼Œæ‰€ä»¥å¯ä»¥é…ç½®JVMå¯¹å­—èŠ‚ç çš„å¤„ç†æ¨¡å¼ã€‚</li>
<li>-Xintï¼šåœ¨è§£é‡Šæ¨¡å¼ï¼ˆinterpreted modeï¼‰ä¸‹è¿è¡Œï¼Œ-Xintæ ‡è®°ä¼šå¼ºåˆ¶JVMè§£é‡Šæ‰§è¡Œæ‰€æœ‰çš„å­—èŠ‚ç ï¼Œè¿™å½“ç„¶ä¼šé™ä½è¿è¡Œé€Ÿåº¦ï¼Œé€šå¸¸ä½10å€æˆ–æ›´å¤šã€‚</li>
<li>-Xcompï¼š-Xcompå‚æ•°ä¸-Xintæ­£å¥½ç›¸åï¼ŒJVMåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ä¼šæŠŠæ‰€æœ‰çš„å­—èŠ‚ç ç¼–è¯‘æˆæœ¬åœ°ä»£ç ï¼Œä»è€Œå¸¦æ¥æœ€å¤§ç¨‹åº¦çš„ä¼˜åŒ–ã€‚ã€æ³¨æ„é¢„çƒ­ã€‘</li>
<li>-Xmixedï¼š-Xmixedæ˜¯æ··åˆæ¨¡å¼ï¼Œå°†è§£é‡Šæ¨¡å¼å’Œç¼–è¯‘æ¨¡å¼è¿›è¡Œæ··åˆä½¿ç”¨ï¼Œæœ‰JVMè‡ªå·±å†³å®šï¼Œè¿™æ˜¯JVMçš„é»˜è®¤æ¨¡å¼ï¼Œä¹Ÿæ˜¯æ¨èæ¨¡å¼ã€‚æˆ‘ä»¬ä½¿ç”¨java -versionå¯ä»¥çœ‹åˆ° mixed modeç­‰ä¿¡æ¯ã€‚</li>
</ol>
<h4 id="å †å†…å­˜è®¾ç½®å‚æ•°">å †å†…å­˜è®¾ç½®å‚æ•°</h4>
<ol>
<li>å¦‚æœä»€ä¹ˆéƒ½ä¸é…ç½®ä¼šå¦‚ä½•ï¼Ÿ</li>
<li>Xmxæ˜¯å¦ä¸Xmsè®¾ç½®ç›¸ç­‰ï¼Ÿ</li>
<li>Xmxè®¾ç½®ä¸ºæœºå™¨å†…å­˜çš„ä»€ä¹ˆæ¯”ä¾‹åˆé€‚ï¼Ÿ</li>
</ol>
<p><img src="C:%5CUsers%5Cscau_%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210918133936267.png" alt="image-20210918133936267"></p>
<ul>
<li>-Xmx æŒ‡å®šæœ€å¤§å †å†…å­˜ã€‚å¦‚-Xmx4gã€‚è¿™çŸ¥è¯†é™åˆ¶äº†Heapéƒ¨åˆ†çš„æœ€å¤§å€¼ä¸º4gã€è¿™ä¸ªå†…å­˜ä¸åŒ…æ‹¬æ ˆå†…å­˜ï¼Œä¹Ÿä¸åŒ…æ‹¬å †å¤–ä½¿ç”¨çš„å†…å­˜ã€‚</li>
<li>-Xms æŒ‡å®šå †å†…å­˜ç©ºé—´çš„åˆå§‹å¤§å°ã€‚å¦‚-Xms4gã€‚è€Œä¸”æŒ‡å®šçš„å†…å­˜å¤§å°ï¼Œå¹¶ä¸æ˜¯æ“ä½œç³»ç»Ÿå®é™…åˆ†é…çš„åˆå§‹å€¼ï¼Œè€Œæ˜¯GCå…ˆè§„åˆ’å¥½ï¼Œç”¨åˆ°æ‰åˆ†é…ã€‚ä¸“ç”¨æœåŠ¡å™¨ä¸Šéœ€è¦ä¿æŒ -Xms å’Œ -Xmx ä¸€è‡´ï¼Œå¦åˆ™åº”ç”¨åˆšå¯åŠ¨å¯èƒ½å°±æœ‰å¥½å‡ ä¸ªFullGCã€‚å½“ä¸¤è€…é…ç½®ä¸ä¸€è‡´æ—¶ï¼Œå †å†…å­˜æ‰©å®¹å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½æŠ–åŠ¨ã€‚</li>
<li>-Xmn ç­‰ä»·äº -XX:NewSizeï¼Œä½¿ç”¨ G1 åƒåœ¾æ”¶é›†å™¨ä¸åº”è¯¥è®¾ç½®è¯¥é€‰é¡¹ï¼Œåœ¨å…¶ä»–çš„æŸäº›ä¸šåŠ¡åœºæ™¯ä¸‹å¯ä»¥è®¾ç½®ã€‚å®˜æ–¹å»ºè®®è®¾ç½®ä¸º -Xmx çš„ 1/2 ~ 1/4</li>
<li>-XX:MaxPermSize=sizeï¼Œè¿™æ˜¯ JDK1.7 ä¹‹å‰ä½¿ç”¨çš„ã€‚Java8 é»˜è®¤å…è®¸çš„ Metaç©ºé—´æ— é™å¤§ï¼Œæ­¤å‚æ•°æ— æ•ˆã€‚</li>
<li>-XX:MaxMetaspaceSize=sizeï¼ŒJava8é»˜è®¤ä¸é™åˆ¶Metaç©ºé—´ï¼Œä¸€èˆ¬ä¸å…è®¸è®¾ç½®è¯¥é€‰é¡¹ã€‚</li>
<li>-XX:MaxDirectMemorySize=sizeï¼Œç³»ç»Ÿå¯ä»¥ä½¿ç”¨çš„æœ€å¤§å †å¤–å†…å­˜ï¼Œè¿™ä¸ªå‚æ•°è·Ÿ-Dsun.nio.MaxDirectMemorySize æ•ˆæœç›¸åŒã€‚</li>
<li>-Xss è®¾ç½®æ¯ä¸ªçº¿ç¨‹æ ˆçš„å­—èŠ‚æ•°ã€‚ä¾‹å¦‚ -Xss1mæŒ‡å®šçº¿ç¨‹æ ˆä¸º1MBï¼Œä¸-XX:ThreadStackSize=1mç­‰ä»·</li>
</ul>
<h4 id="GCè®¾ç½®å‚æ•°">GCè®¾ç½®å‚æ•°</h4>
<p>å„ä¸ªJVMç‰ˆæœ¬çš„é»˜è®¤GCæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>-XX:+UseG1GCï¼š</li>
<li>-XX:+UseConcMarkSweepGCï¼š</li>
<li>-XX:+UseSerialGCï¼š</li>
<li>-XX:+UseParallelGCï¼š</li>
<li>-XX:+UnlockExperimentalVMOptions -XX:+UseZGCï¼š</li>
<li>-XX:+UnlockExperimentalVMOptions -XX:+UseShenandoahGCï¼š</li>
</ul>
<h4 id="åˆ†æè¯Šæ–­å‚æ•°">åˆ†æè¯Šæ–­å‚æ•°</h4>
<ul>
<li>-XX:Â±HeapDumpOnOutOfMemoryError é€‰é¡¹ï¼Œå½“OutOfMemoryErroräº§ç”Ÿï¼Œå³å†…å­˜æº¢å‡ºï¼ˆå †å†…å­˜æˆ–æŒä¹…ä»£ï¼‰æ—¶ï¼Œè‡ªåŠ¨Dumpå †å†…å­˜ã€‚
<ul>
<li>ç¤ºä¾‹ç”¨æ³•ï¼šjava -XX:+HeapDumpOnOutOfMemoryError -Xmx256m ConsumeHeap</li>
</ul>
</li>
<li>-XX:HeapDumpPath é€‰é¡¹ï¼Œä¸HeapDumpOnOutOfMemoryErroræ­é…ä½¿ç”¨ï¼ŒæŒ‡å®šå†…å­˜æº¢å‡ºæ—¶Dumpæ–‡ä»¶çš„ç›®å½•ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™é»˜è®¤ä¸ºå¯åŠ¨Javaç¨‹åºçš„å·¥ä½œç›®å½•ã€‚
<ul>
<li>ç¤ºä¾‹ç”¨æ³•ï¼šjava -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/usr/local/ ConsumeHeap è‡ªåŠ¨Dumpçš„hprofæ–‡ä»¶ä¼šå­˜å‚¨åˆ°/usr/local/ ç›®å½•ä¸‹ã€‚</li>
</ul>
</li>
<li>-XX:OnError é€‰é¡¹ï¼Œå‘ç”Ÿè‡´å‘½é”™è¯¯æ—¶ï¼ˆfatal errorï¼‰æ‰§è¡Œçš„è„šæœ¬ã€‚ä¾‹å¦‚ï¼Œå†™ä¸€ä¸ªè„šæœ¬æ¥è®°å½•å‡ºé”™æ—¶é—´ï¼Œæ‰§è¡Œä¸€äº›å‘½ä»¤ï¼Œæˆ–è€…curlä¸€ä¸‹æŸä¸ªåœ¨çº¿æŠ¥è­¦çš„urlã€‚
<ul>
<li>ç¤ºä¾‹ç”¨æ³•ï¼šjava -XX:OnError=â€œgdb - %pâ€ MyApp å¯ä»¥å‘ç°æœ‰ä¸€ä¸ª %p çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¿›ç¨‹PIDã€‚</li>
</ul>
</li>
<li>-XX:OnOutOfMemoryError é€‰é¡¹ï¼ŒæŠ›å‡º OutOfMemoryError é”™è¯¯æ—¶æ‰§è¡Œçš„è„šæœ¬ã€‚</li>
<li>-XX:ErrorFile=filename é€‰é¡¹ï¼Œè‡´å‘½é”™è¯¯çš„æ—¥å¿—æ–‡ä»¶åï¼Œç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„ã€‚</li>
<li>-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=1506ï¼Œè¿œç¨‹è°ƒè¯•</li>
</ul>
<h4 id="JavaAgentå‚æ•°">JavaAgentå‚æ•°</h4>
<p>Agent æ˜¯ JVM ä¸­çš„ä¸€é¡¹é»‘ç§‘æŠ€, å¯ä»¥é€šè¿‡æ— ä¾µå…¥æ–¹å¼æ¥åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¯”å¦‚æ³¨å…¥ AOP ä»£ç ï¼Œæ‰§è¡Œç»Ÿè®¡ç­‰ç­‰ï¼Œæƒé™éå¸¸å¤§ã€‚è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹é…ç½®é€‰é¡¹ã€‚</p>
<p>è®¾ç½® agent çš„è¯­æ³•å¦‚ä¸‹:</p>
<ul>
<li>-agentlib:libname[=options] å¯ç”¨ native æ–¹å¼çš„ agent, å‚è€ƒ LD_LIBRARY_PATH è·¯å¾„</li>
<li>-agentpath:pathname[=options] å¯ç”¨ native æ–¹å¼çš„ agent</li>
<li>-javaagent:jarpath[=options] å¯ç”¨å¤–éƒ¨çš„ agent åº“, æ¯”å¦‚ pinpoint.jar ç­‰ç­‰</li>
<li>-Xnoagent åˆ™æ˜¯ç¦ç”¨æ‰€æœ‰ agentã€‚</li>
</ul>
<p>ä»¥ä¸‹ç¤ºä¾‹å¼€å¯ CPU ä½¿ç”¨æ—¶é—´æŠ½æ ·åˆ†æ:</p>
<p>JAVA_OPTS=â€œ-agentlib:hprof=cpu=samples,file=cpu.samples.logâ€</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">Leo Liu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://liule8.github.io/post/7cc01704.html">https://liule8.github.io/post/7cc01704.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://liule8.github.io" target="_blank">Leo's notes</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JVM/">JVM</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/5725d9d1.html"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Oracleçš„ä¸€äº›å¸¸ç”¨SQL</div></div></a></div><div class="next-post pull-right"><a href="/post/f2a93110.html"><img class="next-cover" src="/images/posts/cover/springDataJpa.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Spring Data JPAä¹‹é«˜çº§ç”¨æ³•-JpaSpecificationExecutoråŸç†</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/post/fb416a43.html" title="JVM æ ¸å¿ƒæŠ€æœ¯-GC é—®é¢˜æ’æŸ¥å®æˆ˜æ¡ˆä¾‹"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-02</div><div class="title">JVM æ ¸å¿ƒæŠ€æœ¯-GC é—®é¢˜æ’æŸ¥å®æˆ˜æ¡ˆä¾‹</div></div></a></div><div><a href="/post/8afb6c30.html" title="JVM æ ¸å¿ƒæŠ€æœ¯-JVM å¸¸è§é¢è¯•é—®é¢˜æ±‡æ€»"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-02</div><div class="title">JVM æ ¸å¿ƒæŠ€æœ¯-JVM å¸¸è§é¢è¯•é—®é¢˜æ±‡æ€»</div></div></a></div><div><a href="/post/53058f25.html" title="JVM æ ¸å¿ƒæŠ€æœ¯-GCæ€»ç»“"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-06</div><div class="title">JVM æ ¸å¿ƒæŠ€æœ¯-GCæ€»ç»“</div></div></a></div><div><a href="/post/c0deaed6.html" title="JVM æ ¸å¿ƒæŠ€æœ¯-å·¥å…·ä¸GCç­–ç•¥"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-19</div><div class="title">JVM æ ¸å¿ƒæŠ€æœ¯-å·¥å…·ä¸GCç­–ç•¥</div></div></a></div><div><a href="/post/dc7732e8.html" title="JVM æ ¸å¿ƒæŠ€æœ¯-è°ƒä¼˜åˆ†æä¸é¢è¯•ç»éªŒ"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-23</div><div class="title">JVM æ ¸å¿ƒæŠ€æœ¯-è°ƒä¼˜åˆ†æä¸é¢è¯•ç»éªŒ</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Leo Liu</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">424</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">84</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">51</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/liule8"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/LIULE8" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:leo.liu.scau@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>å…¬å‘Š</span></div><div class="announcement_content">è¿™é‡Œæ˜¯å…¬å‘Š</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">JVM åŸºç¡€çŸ¥è¯†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-JVM"><span class="toc-number">1.1.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯ JVM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JRE%E3%80%81JDK-%E5%92%8C-JVM-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.2.</span> <span class="toc-text">JREã€JDK å’Œ JVM çš„å…³ç³»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JVM-%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.</span> <span class="toc-text">JVM åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Java-%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.3.1.</span> <span class="toc-text">Java ä½“ç³»ç»“æ„ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JVM-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.3.2.</span> <span class="toc-text">JVM ç”Ÿå‘½å‘¨æœŸä»‹ç»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JAVA-%E5%AD%97%E8%8A%82%E7%A0%81"><span class="toc-number">1.4.</span> <span class="toc-text">JAVA å­—èŠ‚ç </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8"><span class="toc-number">1.4.1.</span> <span class="toc-text">ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">1.4.2.</span> <span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%97%E8%8A%82%E7%A0%81%EF%BC%9F"><span class="toc-number">1.4.3.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯å­—èŠ‚ç ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%AD%97%E8%8A%82%E7%A0%81"><span class="toc-number">1.4.4.</span> <span class="toc-text">ç”Ÿæˆå­—èŠ‚ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E5%AD%97%E8%8A%82%E7%A0%81"><span class="toc-number">1.4.5.</span> <span class="toc-text">æœ€ç®€å•çš„å­—èŠ‚ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E7%82%B9%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="toc-number">1.4.6.</span> <span class="toc-text">å¤æ‚ç‚¹çš„ä¾‹å­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E7%A0%81%E7%9A%84%E8%BF%90%E8%A1%8C%E6%97%B6%E7%BB%93%E6%9E%84"><span class="toc-number">1.4.7.</span> <span class="toc-text">å­—èŠ‚ç çš„è¿è¡Œæ—¶ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E5%8A%A9%E8%AE%B0%E7%AC%A6%E5%88%B0%E4%BA%8C%E8%BF%9B%E5%88%B6"><span class="toc-number">1.4.8.</span> <span class="toc-text">ä»åŠ©è®°ç¬¦åˆ°äºŒè¿›åˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E5%88%99%E8%BF%90%E8%A1%8C%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="toc-number">1.4.9.</span> <span class="toc-text">å››åˆ™è¿è¡Œçš„ä¾‹å­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%A4%84%E7%90%86%E4%B8%8E%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F%E8%A1%A8"><span class="toc-number">1.4.10.</span> <span class="toc-text">æ•°å€¼å¤„ç†ä¸æœ¬åœ°å˜é‡è¡¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%95%B0%E6%93%8D%E4%BD%9C%E4%B8%8E%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.4.11.</span> <span class="toc-text">ç®—æ•°æ“ä½œä¸ç±»å‹è½¬æ¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E5%BE%AA%E7%8E%AF%E6%8E%A7%E5%88%B6"><span class="toc-number">1.4.12.</span> <span class="toc-text">ä¸€ä¸ªå®Œæ•´çš„å¾ªç¯æ§åˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E7%9A%84%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.13.</span> <span class="toc-text">æ–¹æ³•è°ƒç”¨çš„æŒ‡ä»¤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JVM-%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="toc-number">1.5.</span> <span class="toc-text">JVM ç±»åŠ è½½å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8-2"><span class="toc-number">1.5.1.</span> <span class="toc-text">ä½œç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99-2"><span class="toc-number">1.5.2.</span> <span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.5.3.</span> <span class="toc-text">ç±»çš„ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.5.4.</span> <span class="toc-text">ç±»åˆå§‹åŒ–é¡ºåº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E6%97%B6%E6%9C%BA"><span class="toc-number">1.5.5.</span> <span class="toc-text">ç±»çš„åˆå§‹åŒ–æ—¶æœº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E4%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96%EF%BC%88%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%8A%A0%E8%BD%BD%EF%BC%89"><span class="toc-number">1.5.6.</span> <span class="toc-text">ä¸ä¼šåˆå§‹åŒ–ï¼ˆå¯èƒ½ä¼šåŠ è½½ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="toc-number">1.5.7.</span> <span class="toc-text">ä¸‰ç±»åŠ è½½å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D-ClassLoader-%E5%8A%A0%E8%BD%BD%E4%BA%86%E5%93%AA%E4%BA%9B-Jar"><span class="toc-number">1.5.8.</span> <span class="toc-text">æ˜¾ç¤ºå½“å‰ ClassLoader åŠ è½½äº†å“ªäº› Jar?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-ClassLoader"><span class="toc-number">1.5.9.</span> <span class="toc-text">è‡ªå®šä¹‰ ClassLoader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%BC%95%E7%94%A8%E7%B1%BB%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">1.5.10.</span> <span class="toc-text">æ·»åŠ å¼•ç”¨ç±»çš„å‡ ç§æ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JVM-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.6.</span> <span class="toc-text">JVM å†…å­˜æ¨¡å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JVM-%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84"><span class="toc-number">1.6.1.</span> <span class="toc-text">JVM å†…å­˜ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JVM-%E5%86%85%E5%AD%98%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84"><span class="toc-number">1.6.2.</span> <span class="toc-text">JVM å†…å­˜æ•´ä½“ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JVM-%E6%A0%88%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84"><span class="toc-number">1.6.3.</span> <span class="toc-text">JVM æ ˆå†…å­˜ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JVM%E5%A0%86%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84"><span class="toc-number">1.6.4.</span> <span class="toc-text">JVMå †å†…å­˜ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CPU%E4%B8%8E%E5%86%85%E5%AD%98%E8%A1%8C%E4%B8%BA"><span class="toc-number">1.6.5.</span> <span class="toc-text">CPUä¸å†…å­˜è¡Œä¸º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93%EF%BC%9A%E4%BB%80%E4%B9%88%E6%98%AF-JMM"><span class="toc-number">1.6.6.</span> <span class="toc-text">å°ç»“ï¼šä»€ä¹ˆæ˜¯ JMM ?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JVM-%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0"><span class="toc-number">1.7.</span> <span class="toc-text">JVM å¯åŠ¨å‚æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E5%88%86%E7%B1%BB"><span class="toc-number">1.7.1.</span> <span class="toc-text">å¯åŠ¨å‚æ•°åˆ†ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%B1%9E%E6%80%A7%E5%8F%82%E6%95%B0"><span class="toc-number">1.7.1.1.</span> <span class="toc-text">ç³»ç»Ÿå±æ€§å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%A8%A1%E5%BC%8F%E5%8F%82%E6%95%B0"><span class="toc-number">1.7.1.2.</span> <span class="toc-text">è¿è¡Œæ¨¡å¼å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A0%86%E5%86%85%E5%AD%98%E8%AE%BE%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="toc-number">1.7.1.3.</span> <span class="toc-text">å †å†…å­˜è®¾ç½®å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GC%E8%AE%BE%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="toc-number">1.7.1.4.</span> <span class="toc-text">GCè®¾ç½®å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E8%AF%8A%E6%96%AD%E5%8F%82%E6%95%B0"><span class="toc-number">1.7.1.5.</span> <span class="toc-text">åˆ†æè¯Šæ–­å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JavaAgent%E5%8F%82%E6%95%B0"><span class="toc-number">1.7.1.6.</span> <span class="toc-text">JavaAgentå‚æ•°</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/c24b527c.html" title="æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-åŠ¨æ€è§„åˆ’å®æˆ˜"><img src="/images/posts/cover/dataStructuresAndAlgorithms.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-åŠ¨æ€è§„åˆ’å®æˆ˜"/></a><div class="content"><a class="title" href="/post/c24b527c.html" title="æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-åŠ¨æ€è§„åˆ’å®æˆ˜">æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-åŠ¨æ€è§„åˆ’å®æˆ˜</a><time datetime="2021-12-02T19:39:46.000Z" title="å‘è¡¨äº 2021-12-02 19:39:46">2021-12-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/181f652a.html" title="æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-åŠ¨æ€è§„åˆ’ç†è®º"><img src="/images/posts/cover/dataStructuresAndAlgorithms.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-åŠ¨æ€è§„åˆ’ç†è®º"/></a><div class="content"><a class="title" href="/post/181f652a.html" title="æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-åŠ¨æ€è§„åˆ’ç†è®º">æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-åŠ¨æ€è§„åˆ’ç†è®º</a><time datetime="2021-12-01T19:59:25.000Z" title="å‘è¡¨äº 2021-12-01 19:59:25">2021-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/c0e7981d.html" title="æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-åˆè¯†åŠ¨æ€è§„åˆ’"><img src="/images/posts/cover/dataStructuresAndAlgorithms.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-åˆè¯†åŠ¨æ€è§„åˆ’"/></a><div class="content"><a class="title" href="/post/c0e7981d.html" title="æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-åˆè¯†åŠ¨æ€è§„åˆ’">æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-åˆè¯†åŠ¨æ€è§„åˆ’</a><time datetime="2021-12-01T19:19:00.000Z" title="å‘è¡¨äº 2021-12-01 19:19:00">2021-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/2453efad.html" title="Sparkå®æˆ˜ä¹‹å›¾æŒ–æ˜-å¤§è§„æ¨¡å¹¶è¡Œå›¾æŒ–æ˜å¼•æ“ GraphX"><img src="/images/posts/cover/spark.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Sparkå®æˆ˜ä¹‹å›¾æŒ–æ˜-å¤§è§„æ¨¡å¹¶è¡Œå›¾æŒ–æ˜å¼•æ“ GraphX"/></a><div class="content"><a class="title" href="/post/2453efad.html" title="Sparkå®æˆ˜ä¹‹å›¾æŒ–æ˜-å¤§è§„æ¨¡å¹¶è¡Œå›¾æŒ–æ˜å¼•æ“ GraphX">Sparkå®æˆ˜ä¹‹å›¾æŒ–æ˜-å¤§è§„æ¨¡å¹¶è¡Œå›¾æŒ–æ˜å¼•æ“ GraphX</a><time datetime="2021-12-01T09:34:13.000Z" title="å‘è¡¨äº 2021-12-01 09:34:13">2021-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/a85ee733.html" title="æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-å›æº¯ç®—æ³•"><img src="/images/posts/cover/dataStructuresAndAlgorithms.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-å›æº¯ç®—æ³•"/></a><div class="content"><a class="title" href="/post/a85ee733.html" title="æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-å›æº¯ç®—æ³•">æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åŸºç¡€ç¯‡-å›æº¯ç®—æ³•</a><time datetime="2021-11-30T19:50:59.000Z" title="å‘è¡¨äº 2021-11-30 19:50:59">2021-11-30</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Leo Liu</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.css"><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', '', 'katex-wrap')
  })
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>