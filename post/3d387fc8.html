<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>应用性能分析之日志可视化Kibana | Leo's notes</title><meta name="keywords" content="应用性能分析"><meta name="author" content="Leo Liu"><meta name="copyright" content="Leo Liu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="日志可视化：Kibana 让千万行日志有形有样 Kibana 作为 Elastic Stack 生态中的数据展示项目，先了解一下 Elastic Stack 及其前身 ELK。 Elastic Stack 前身：ELK 生态 Elastic Stack 生态是 Elastic 公司最近两三年提出的架构，它的前身是 ELK 生态。 ELK 是 Elastic 公司的三个开源项目的缩写，这三个项目分别">
<meta property="og:type" content="article">
<meta property="og:title" content="应用性能分析之日志可视化Kibana">
<meta property="og:url" content="https://liule8.github.io/post/3d387fc8.html">
<meta property="og:site_name" content="Leo&#39;s notes">
<meta property="og:description" content="日志可视化：Kibana 让千万行日志有形有样 Kibana 作为 Elastic Stack 生态中的数据展示项目，先了解一下 Elastic Stack 及其前身 ELK。 Elastic Stack 前身：ELK 生态 Elastic Stack 生态是 Elastic 公司最近两三年提出的架构，它的前身是 ELK 生态。 ELK 是 Elastic 公司的三个开源项目的缩写，这三个项目分别">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2021-08-05T09:42:55.000Z">
<meta property="article:modified_time" content="2021-10-16T05:06:47.778Z">
<meta property="article:author" content="Leo Liu">
<meta property="article:tag" content="应用性能分析">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://liule8.github.io/post/3d387fc8"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-10-16 05:06:47'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/images/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">371</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">83</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">46</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Leo's notes</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">应用性能分析之日志可视化Kibana</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-05T09:42:55.000Z" title="发表于 2021-08-05 09:42:55">2021-08-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-10-16T05:06:47.778Z" title="更新于 2021-10-16 05:06:47">2021-10-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BA%94%E7%94%A8%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">应用性能分析</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>10分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="应用性能分析之日志可视化Kibana"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>日志可视化：Kibana 让千万行日志有形有样</h1>
<p>Kibana 作为 Elastic Stack 生态中的数据展示项目，先了解一下 Elastic Stack 及其前身 ELK。</p>
<h2 id="Elastic-Stack-前身：ELK-生态">Elastic Stack 前身：ELK 生态</h2>
<p>Elastic Stack 生态是 Elastic 公司最近两三年提出的架构，它的前身是 ELK 生态。</p>
<p>ELK 是 Elastic 公司的三个开源项目的缩写，这三个项目分别如下。</p>
<ul>
<li>
<p>Elasticsearch：基于 Apache Lucene 搜索引擎，使用 RESTful 接口屏蔽了搜索架构的复杂性。</p>
</li>
<li>
<p>Logstash：服务器数据处理管道。</p>
</li>
<li>
<p><strong>Kibana</strong>：Elasticsearch 搜索引擎的可视化平台。</p>
</li>
</ul>
<p>当应用服务的日志通过 Logstash 进行结构化处理，进入 Elasticsearch 搜索引擎后，海量的日志就具备了在 Kibana 平台上的集中式实时分析的能力。</p>
<p>以上三者便让 Elastic Stack 成为目前最流行，也最具代表性的日志分析架构。在了解 Elastic Stack 之前，需要先了解下日志分析架构的演进过程。</p>
<h2 id="日志分析框架的演进">日志分析框架的演进</h2>
<p>对当下日志分析架构的思考：理解为什么 Elastic Stack 生态是最优解？Elastic Stack 生态又到底解决了什么痛点？</p>
<p>日志分析架构大致有以下三个阶段。</p>
<h3 id="1-“原始”时期">1. “原始”时期</h3>
<p>时间拨回 2000 年初，互联网刚刚兴起，整体的应用服务架构还未进入微服务时代，应用服务大多都是单体的，所以应用服务的日志天生就是集中在那台单体机器上打印的日志。</p>
<p>由于互联网企业都着眼在拓展业务上，且当时的开发人员也都非常淳朴，还没有窃取公司数据贩卖的案例。顺应当时的时代背景，大多数公司的一线开发都被授予直接登录服务器的管理员权限。</p>
<p>所以这个时候开发人员一般都使用 Linux 服务器的统计命令来探索和分析日志。</p>
<h3 id="2-集中式日志架构初期">2. 集中式日志架构初期</h3>
<p>时间往后拨几年，互联网应用进入了微服务架构时代。随着产品根据不同的功能，切分为多个微服务，企业的产品迭代迎来了质的提效。</p>
<p>但任何事物都没有单方面的优点，不加治理的微服务让日志结构更加复杂，再加上流量红利，日志的复杂度和量级都以指数趋势上升。即使一线开发依然被授予应用服务器的管理员权限，“原始”的日志分析手段也变得耗时、费力，且效率低下。</p>
<p>这时，无法高效的处理，复杂日志场景的缺点完全暴露出来了，再加上安全审计的监管要求，集中式日志架构的诉求呼之欲去。</p>
<p>由于此时市场上还没有开源好用的集中式日志架构，为了快速解决这一问题，最典型的架构就是使用 Hadoop 平台实现日志的离线处理。不过 Hadoop 框架是编程框架，并非可以拿来即用的日志分析平台。</p>
<p>所以这个阶段的集中式日志架构的共通点是：需要耗费人力通过编码才能实现，且上线后实时性较差。</p>
<h3 id="3-标准化、规范化时期">3. 标准化、规范化时期</h3>
<p>时间来到当下，经过上一阶段的沉淀，很多优秀的开源日志分析平台脱颖而出。其中 <strong>Elastic Stack</strong> 生态是最受业内欢迎的，且最具代表的集中式日志实时处理和分析的解决方案。</p>
<h2 id="重新认识日志">重新认识日志</h2>
<p>在展开对Kibana的学习前，有必要重新认识下原始物料，就是每一行日志的内容。理解日志的内容，有助于更好地学习下文的“如何对海量日志进行搜索和图形化展示”部分。</p>
<p>因为如果不对原始物料进行思索，贸然接入 Elastic Stack 日志架构后，会发现存到 Elasticsearch 搜索引擎日志数据会仅有时间戳和原始日志内容。这样在探索和分析上，由于都是未加处理成结构化的日志，根本无法发挥Kibana的可视化能力。所以为了让日志更具备分析性，便需要先复习下当下日志的内容，然后再学习如何进行探索和分析。</p>
<p>当下的业务开发人员都是将日志信息委托给日志框架进行打印，所以日志内容可以分为两类：</p>
<ul>
<li>
<p>日志框架打印的日志信息</p>
</li>
<li>
<p>一线开发人员打印的日志信息</p>
</li>
</ul>
<p>除了业务开发人员通过日志框架打印业务日志外，在框架层面还有框架日志。</p>
<p>其中日志框架打印的信息，常用的属性如下。</p>
<ul>
<li>
<p>时间戳：调用日志方法时生成时间戳，解决异步打印、异步收集造成的时间不精准问题。</p>
</li>
<li>
<p>线程名称：由于线程 ID 不直观，所以通常使用线程名称来标识线程（注意不可以使用默认线程名称，需要根据使用线程情况来重命名线程名称）。</p>
</li>
<li>
<p>日志级别：根据日志级别的不同，可粗略地对日志进行预处理。比如 DEBUG、TRACE 级别的日志只有在定位问题时才记录；当日志为 ERROR 级别时，立刻发出告警。</p>
</li>
<li>
<p>调用位置：记录打印日志的类名和行号，有助于开发人员快速寻找源代码的上下文现场。</p>
</li>
<li>
<p>增强属性：如全链路跟踪 ID，用于追溯引起日志打印的上下游。</p>
</li>
</ul>
<p>那现在可以简单认为：日志在接入 Elastic Stack 生态后，通过Grok 工具使用与结构化匹配的正则，将原始日志提取出通用的日志属性和对应的值，产出结构化的 Elasticsearch Doc 文档。然后再将其存储到 Elasticsearch 中，开发人员就可以根据这些属性在 Kibana 中，更好地进行日志数据的探索和分析了。</p>
<h2 id="Kibana-探索和分析日志">Kibana 探索和分析日志</h2>
<p>使用 Kibana 探索和分析日志大致分为以下三种使用方式。</p>
<ul>
<li>
<p>第一种：通过 Kibana 探索（Discovery）功能，进行准确、实时的集中日志搜索。</p>
</li>
<li>
<p>第二种：创建多样的可视化视图（Visualize），将相关联的视图组合成仪表盘（Dashboard）。</p>
</li>
<li>
<p>第三种：通过 Elasticsearch SQL 直接从 Elasticsearch 中提取数据，加上丰富元素布局绘制画布（Canvas）。</p>
</li>
</ul>
<p>前两种相对通用，使用方式都是必须基于创建索引模式（index pattern），然后对索引数据进行探索和分析，而第三种相较前两种也较个性化和高级。</p>
<h3 id="1-创建索引模式">1. 创建索引模式</h3>
<p>索引模式告诉 Kibana 哪些 Elasticsearch 索引包含了你想处理的日志数据，创建索引模式有多种方式，最常见的就是使用后置通配符。</p>
<p>在单个 Elasticsearch 集群内部完成索引模式的创建。如下图所示，集群内部有多个以“天”为切分维度的日志索引。如 data_logs-20210307、data_logs-20210306、data_logs-20210305 等，我们可以通过 data_logs-* 的正则表达式完成索引的匹配。</p>
<p><img src="http://image.leonote.cn/20210924141352.png" alt="image-20210924141352150"></p>
<p>在创建好一个日志索引模式后，就可以在“探索页面”中搜索日志数据了；然后再在可视化视图中以图表、表格等方式分析数据。</p>
<p>下面以官方的网站请求日志示例数据为例进行讲解。</p>
<h3 id="2-探索日志">2. 探索日志</h3>
<p>探索功能非常容易上手，在企业内部 SRE 负责部署 Elastic Stack，一线业务开发只需将应用日志在机器上的地址和日志结构化正则表达式告诉给 SRE。</p>
<p>不一会儿在探索功能页面上就能看到应用服务所有节点的日志了。通过探索功能，开发人员可以搜索日志数据的每个属性，并过滤结果。</p>
<p>不仅如此，还可以获取与搜索相匹配的文档字段级详细信息，以及查看搜索命中日志前后发生的日志。如下图所示，下面探索场景包括以下三个部分。</p>
<ul>
<li>
<p>搜索条件：网站请求非正常返回（HTTP 状态码非 200），且地域为中国流量。</p>
</li>
<li>
<p>结果过滤：由于日志属性较多，实现只返回 IP 地址、机器设备和请求的 host。</p>
</li>
<li>
<p>时间范围：最近七天。</p>
</li>
</ul>
<p><img src="http://image.leonote.cn/20210924141524.png" alt="image-20210924141524610"></p>
<p>如上图所示，采用的搜索方式是使用两个 Filter 实现“条件搜索”，也比较推荐这种方式；而使用 Seach 输入框里输入基于 Lucene 语法的语句，或是基于 KQL 的语法的语句，则是不推荐的。</p>
<p>虽然这三种语法都可以实现“探索日志”这一目标。但 Filter 查询语法是最常用的，并且在熟练掌握以后，你还可以用它去“查询索引”；而后两者的使用场景就少了很多。</p>
<p>所以，这也是学习过程中要注意的地方，要尽量去学习那些现在能常用的，未来能复用的知识和技能。这样才能为未来进阶打好基础，职业发展才能越来越宽。</p>
<h3 id="3-制作多样的可视化视图">3. 制作多样的可视化视图</h3>
<p>可视化视图是制作仪表盘的素材，视图的质量紧密关着仪表盘的效果。如何掌握制作可视化视图呢？可以先学习最热门视图，然后在对更多视图的学习逐个击破，目前 Kibana 可视化视图共有 20 个左右的视图，视图共分为 8 类。</p>
<p>下表是在日常工作中使用场景多的视图，可以通过以下表快速学习并掌握热门视图的概要。若想更深入地学习，可以访问<a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/kibana/index.html?fileGuid=xxQTRXtVcqtHK6j8">Kibana 官方文档</a>。</p>
<table>
<thead>
<tr>
<th>分类</th>
<th>视图</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>基础图形</td>
<td>Line<br />Area<br />Bar charts<br />Pie chart</td>
<td>线形图、面积图和柱形图：在 X/Y 图中比较不同的系数。多用于对比。比如月销商品类目的折线图。<br />饼图：显示每个来源对总体的贡献。</td>
</tr>
<tr>
<td>数据</td>
<td>Data table</td>
<td>数据表：将汇总数据平铺成表格格式。可以理解为 Kibana 对数据库数据信息的一种原始的展示手段。</td>
</tr>
<tr>
<td>地图</td>
<td>Maps</td>
<td>地图：显示 Kibana 的地理空间数据。根据请求地址和地理信息，<br />          可以直观分析出应用服务地域使用上的差异，有助于产品的本地化建设。</td>
</tr>
<tr>
<td>热图</td>
<td>Heat map</td>
<td>使用矩阵，显示阴影单元格。在分析应用服务日志中，对于开发人员，<br />使用热图可以快速分析出那些代码块较核心，然后针对性地通过分布式手段降低此处代码块的热度。</td>
</tr>
<tr>
<td>其他</td>
<td>Markdown widget</td>
<td>使用 Markdown 文档进行信息说明。</td>
</tr>
</tbody>
</table>
<p>可视化视图上手非常简单，以上文探索日志场景为例，只需要将过滤器迁移到视图中就可以快速绘制出相应的可视化视图。</p>
<p>下面是饼图的示例：比如绘制近七天非正常的请求流量的机器设备分布，并且还要二次分析出非正常流的具体的异常码的分布情况。</p>
<p><img src="http://image.leonote.cn/20210924141610.png" alt="image-20210924141610453"></p>
<h3 id="4-构建仪表盘">4. 构建仪表盘</h3>
<p>仪表盘是相关可视化视图的集合，进入仪表盘的编辑模式，引入相关主题的可视化视图。然后对可视化视图进行展示布局调整，就完成了仪表盘的创建。</p>
<p>下面是网站请求日志示例仪表盘：</p>
<p><img src="http://image.leonote.cn/20210924142140.png" alt="image-20210924142140123"></p>
<h3 id="5-绘制画布">5. 绘制画布</h3>
<p>画布是 Kibana 相对于仪表盘的另一种全新的可视化展示方式。</p>
<p>通过画布，一线业务开发可以直接从 Elasticsearch 中获取实时数据。区别于仪表盘，画布的制作不仅无须先制作可视化视图，它还可提供更丰富的颜色、形状、文本等展示形态，让用户的想象力充分发挥。</p>
<p>画布制作过程分为：</p>
<ul>
<li>
<p>创建空白工作区域（workpad）</p>
</li>
<li>
<p>选择元素，设置元素的颜色、图像和数据</p>
</li>
<li>
<p>指定元素的尺寸和调整布局</p>
</li>
<li>
<p>保存画布的演示布局</p>
</li>
</ul>
<p>下面为网站访问的画布示例，你可以进入编辑模式，然后点击每一个元素去查看绘制的源代码。</p>
<p><img src="http://image.leonote.cn/20210924142928.jpg" alt="f1WfEEFAsS-compress"></p>
<h2 id="如何快速学会使用-Kibana">如何快速学会使用 Kibana</h2>
<p>上文中，通过对网站请求日志示例的讲解，告诉你如何以创建索引模式为起始，最终实现仪表盘和画布的绘制。</p>
<p>但是，如何做出优质的仪表盘和画布，其中还有很多学问、很多的路要去学习实践，建议可以从以下两方面入手。</p>
<h3 id="1-索取需求上线后的指标">1. 索取需求上线后的指标</h3>
<p>最了解产品的建设路线和洞悉用户的人肯定是产品经理和运营，所以开发人员在接到需求时，开发人员不仅要理解需求本身如何去实现，更要反过来对产品经理或是需求的发起者提出上线后的运营效果指标的诉求。</p>
<p>比如需求中要实现的每个接口的 PV、UV 预估，能带来多少 DAU 等，开发人员可以通过 Elastic Stack 快速构建这些指标。这些指标不仅可以指导提测报告中的合理压测标准预期，也是指导开发构建应用服务仪表盘的基础，以及有的放矢地进行性能优化的依据。</p>
<h3 id="2-精进官方示例">2. 精进官方示例</h3>
<p>Kibana 是 Elastic Stack 生态最上层的可视化平台，其设计初衷就是让更多用户通过 Kibana发挥出数据的价值，所以上手难度相对不高，但用好却很难。</p>
<p>为此官方提供了三个示例，我们可以通过对示例的学习，快速掌握 Kibana 大盘的构建过程。</p>
<ul>
<li>
<p>电子商务订单示例：从电子商务系统订单表中分析订单数据，包括商品类目月销的折线图、订单数据展示等。</p>
</li>
<li>
<p>航班数据示例：分析航班系统的示例，仪表盘多为基于地理图的航班行为进行分析。</p>
</li>
<li>
<p>网站请求日志示例：从应用服务的海量访问日志中分析流量的行为，里面包含设备分析的饼图、应用资源访问的散点图等。</p>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Leo Liu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://liule8.github.io/post/3d387fc8.html">https://liule8.github.io/post/3d387fc8.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://liule8.github.io" target="_blank">Leo's notes</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%BA%94%E7%94%A8%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">应用性能分析</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/279c1116.html"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">应用性能分析之数据可视化Grafana</div></div></a></div><div class="next-post pull-right"><a href="/post/166a77f9.html"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">应用性能分析之故障定位VisualVM</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/post/a274b556.html" title="应用性能分析之APM引领者SkyWalking"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-01</div><div class="title">应用性能分析之APM引领者SkyWalking</div></div></a></div><div><a href="/post/59252aae.html" title="应用性能分析之APM总结"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-09</div><div class="title">应用性能分析之APM总结</div></div></a></div><div><a href="/post/2aec7dd3.html" title="应用性能分析之OpenTracing"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-11</div><div class="title">应用性能分析之OpenTracing</div></div></a></div><div><a href="/post/6f886fe9.html" title="应用性能分析之亲和线程模型"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-18</div><div class="title">应用性能分析之亲和线程模型</div></div></a></div><div><a href="/post/166a77f9.html" title="应用性能分析之故障定位VisualVM"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-04</div><div class="title">应用性能分析之故障定位VisualVM</div></div></a></div><div><a href="/post/279c1116.html" title="应用性能分析之数据可视化Grafana"><img class="cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-09</div><div class="title">应用性能分析之数据可视化Grafana</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Leo Liu</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">371</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">83</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">46</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/liule8"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/LIULE8" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:leo.liu.scau@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">这里是公告</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">日志可视化：Kibana 让千万行日志有形有样</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Elastic-Stack-%E5%89%8D%E8%BA%AB%EF%BC%9AELK-%E7%94%9F%E6%80%81"><span class="toc-number">1.1.</span> <span class="toc-text">Elastic Stack 前身：ELK 生态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E6%A1%86%E6%9E%B6%E7%9A%84%E6%BC%94%E8%BF%9B"><span class="toc-number">1.2.</span> <span class="toc-text">日志分析框架的演进</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E2%80%9C%E5%8E%9F%E5%A7%8B%E2%80%9D%E6%97%B6%E6%9C%9F"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. “原始”时期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%9B%86%E4%B8%AD%E5%BC%8F%E6%97%A5%E5%BF%97%E6%9E%B6%E6%9E%84%E5%88%9D%E6%9C%9F"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 集中式日志架构初期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%A0%87%E5%87%86%E5%8C%96%E3%80%81%E8%A7%84%E8%8C%83%E5%8C%96%E6%97%B6%E6%9C%9F"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 标准化、规范化时期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E8%AE%A4%E8%AF%86%E6%97%A5%E5%BF%97"><span class="toc-number">1.3.</span> <span class="toc-text">重新认识日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Kibana-%E6%8E%A2%E7%B4%A2%E5%92%8C%E5%88%86%E6%9E%90%E6%97%A5%E5%BF%97"><span class="toc-number">1.4.</span> <span class="toc-text">Kibana 探索和分析日志</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. 创建索引模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8E%A2%E7%B4%A2%E6%97%A5%E5%BF%97"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. 探索日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%B6%E4%BD%9C%E5%A4%9A%E6%A0%B7%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96%E8%A7%86%E5%9B%BE"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. 制作多样的可视化视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9E%84%E5%BB%BA%E4%BB%AA%E8%A1%A8%E7%9B%98"><span class="toc-number">1.4.4.</span> <span class="toc-text">4. 构建仪表盘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%BB%98%E5%88%B6%E7%94%BB%E5%B8%83"><span class="toc-number">1.4.5.</span> <span class="toc-text">5. 绘制画布</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E5%AD%A6%E4%BC%9A%E4%BD%BF%E7%94%A8-Kibana"><span class="toc-number">1.5.</span> <span class="toc-text">如何快速学会使用 Kibana</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%B4%A2%E5%8F%96%E9%9C%80%E6%B1%82%E4%B8%8A%E7%BA%BF%E5%90%8E%E7%9A%84%E6%8C%87%E6%A0%87"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. 索取需求上线后的指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%B2%BE%E8%BF%9B%E5%AE%98%E6%96%B9%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. 精进官方示例</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/cb0e657c.html" title="Spark实战之基础-算子"><img src="/images/posts/cover/spark.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spark实战之基础-算子"/></a><div class="content"><a class="title" href="/post/cb0e657c.html" title="Spark实战之基础-算子">Spark实战之基础-算子</a><time datetime="2021-11-08T20:03:55.000Z" title="发表于 2021-11-08 20:03:55">2021-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/96089490.html" title="Spark实战之基础-Spark 核心数据结构"><img src="/images/posts/cover/spark.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spark实战之基础-Spark 核心数据结构"/></a><div class="content"><a class="title" href="/post/96089490.html" title="Spark实战之基础-Spark 核心数据结构">Spark实战之基础-Spark 核心数据结构</a><time datetime="2021-11-08T19:46:51.000Z" title="发表于 2021-11-08 19:46:51">2021-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/28996b5b.html" title="Spark实战之基础-Spark 架构与运行环境"><img src="/images/posts/cover/spark.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spark实战之基础-Spark 架构与运行环境"/></a><div class="content"><a class="title" href="/post/28996b5b.html" title="Spark实战之基础-Spark 架构与运行环境">Spark实战之基础-Spark 架构与运行环境</a><time datetime="2021-11-07T16:59:51.000Z" title="发表于 2021-11-07 16:59:51">2021-11-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/2a7649c3.html" title="Spark实战之基础-如何选择 Spark 编程语言以及部署 Spark"><img src="/images/posts/cover/spark.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spark实战之基础-如何选择 Spark 编程语言以及部署 Spark"/></a><div class="content"><a class="title" href="/post/2a7649c3.html" title="Spark实战之基础-如何选择 Spark 编程语言以及部署 Spark">Spark实战之基础-如何选择 Spark 编程语言以及部署 Spark</a><time datetime="2021-11-07T16:59:51.000Z" title="发表于 2021-11-07 16:59:51">2021-11-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/99c2f5e4.html" title="Spark实战之基础-解析 Spark 数据处理与分析场景"><img src="/images/posts/cover/spark.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spark实战之基础-解析 Spark 数据处理与分析场景"/></a><div class="content"><a class="title" href="/post/99c2f5e4.html" title="Spark实战之基础-解析 Spark 数据处理与分析场景">Spark实战之基础-解析 Spark 数据处理与分析场景</a><time datetime="2021-11-07T12:44:45.000Z" title="发表于 2021-11-07 12:44:45">2021-11-07</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Leo Liu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.css"><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', '', 'katex-wrap')
  })
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>