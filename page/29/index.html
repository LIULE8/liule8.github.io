<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Leo's notes</title><meta name="author" content="Leo Liu"><meta name="copyright" content="Leo Liu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="Leo&#39;s notes">
<meta property="og:url" content="https://liule8.github.io/page/29/index.html">
<meta property="og:site_name" content="Leo&#39;s notes">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://liule8.github.io/images/avatar.png">
<meta property="article:author" content="Leo Liu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://liule8.github.io/images/avatar.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://liule8.github.io/page/29/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-10-26 14:13:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/images/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">320</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">82</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">46</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Leo's notes</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Leo's notes</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/LIULE8" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:leo.liu.scau@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/post/4446e8e.html" title="Spring Data JPA之基础知识-Jackson 注解">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Data JPA之基础知识-Jackson 注解"></a></div><div class="recent-post-info"><a class="article-title" href="/post/4446e8e.html" title="Spring Data JPA之基础知识-Jackson 注解">Spring Data JPA之基础知识-Jackson 注解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-10-16T12:52:59.000Z" title="发表于 2020-10-16 12:52:59">2020-10-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/">Spring Data</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/Spring-Data-JPA/">Spring Data JPA</a></span></div><div class="content">Jackson 注解在实体里面如何应用？常见的死循环问题如何解决？Jackson 基本语法我们先看一下我们项目里面的依赖。

从中可以看到，当我们用 spring boot starter 的时候就会默认加载 fasterxml 相关的 jar 包模块，包括核心模块以及 jackson 提供的一些扩展 jar 包，下面详细介绍。
核心模块有三个jackson-core：核心包，提供基于“流模式”解析的相关 API，它包括 JsonPaser 和 JsonGenerator。Jackson 内部实现正是通过高性能的流模式 API 的 JsonGenerator 和 JsonParser 来生成和解析 json。
jackson-annotations：注解包，提供标准注解功能。
jackson-databind：数据绑定包，提供基于“对象绑定”解析的相关 API（ ObjectMapper ） 和“树模型”解析的相关 API（JsonNode）；基于“对象绑定”解析的 API 和“树模型”解析的 API 依赖基于“流模式”解析的 API。如下图中一些标准的类型转换：

jackson 提 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/post/58391339.html" title="Spring Data JPA之基础知识-Entity之间的关联关系">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Data JPA之基础知识-Entity之间的关联关系"></a></div><div class="recent-post-info"><a class="article-title" href="/post/58391339.html" title="Spring Data JPA之基础知识-Entity之间的关联关系">Spring Data JPA之基础知识-Entity之间的关联关系</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-10-16T12:52:59.000Z" title="发表于 2020-10-16 12:52:59">2020-10-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/">Spring Data</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/Spring-Data-JPA/">Spring Data JPA</a></span></div><div class="content">@Entity 之间的关联关系注解如何正确使用？实体与实体之间的关联关系，这和数据的表与表之间的外键关系类似，我们为之为映射。
实体与实体之间的关联关系一共分为四种，分别为 OneToOne、OneToMany、ManyToOne 和 ManyToMany；而实体之间的关联关系又分为双向的和单向的。实体之间的关联关系是在 JPA 使用中最容易发生问题的地方，接下来我将一一揭晓并解释。我们先看一下 OneToOne，即一对一的关联关系。
@OneToOne 关联关系@OneToOne 一般表示对象之间一对一的关联关系，它可以放在 field 上面，也可以放在 get/set 方法上面。其中 JPA 协议有规定，如果是配置双向关联，维护关联关系的是拥有外键的一方，而另一方必须配置 mappedBy；如果是单项关联，直接配置在拥有外键的一方即可。
举个例子：user 表是用户的主信息，user_info 是用户的扩展信息，两者之间是一对一的关系。user_info 表里面有一个 user_id 作为关联关系的外键，如果是单项关联，我们的写法如下：
1234567891011121314151 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/post/441a882f.html" title="Spring Data JPA之基础知识-@Query的使用">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Data JPA之基础知识-@Query的使用"></a></div><div class="recent-post-info"><a class="article-title" href="/post/441a882f.html" title="Spring Data JPA之基础知识-@Query的使用">Spring Data JPA之基础知识-@Query的使用</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-10-13T20:42:59.000Z" title="发表于 2020-10-13 20:42:59">2020-10-13</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/">Spring Data</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/Spring-Data-JPA/">Spring Data JPA</a></span></div><div class="content">Spring Data JPA @Query的使用

快速体验 @Query 的方法、
JpaQueryLookupStrategy 关键源码剖析、
@Query 的基本用法、
@Query 之 Projections 应用返回指定 DTO、
@Query 动态查询解决方法


快速体验 @Query 的方法12345678910package com.example.jpa.example1;import org.springframework.data.jpa.repository.JpaRepository;import org.springframework.data.jpa.repository.Query;import org.springframework.data.repository.query.Param;public interface UserDtoRepository extends JpaRepository&lt;User,Long&gt; &#123;   //通过query注解根据name查询user信息   @Query(&quot;From Use ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/post/feb0b826.html" title="Spring Data JPA之高级用法-DataSource 加载过程">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Data JPA之高级用法-DataSource 加载过程"></a></div><div class="recent-post-info"><a class="article-title" href="/post/feb0b826.html" title="Spring Data JPA之高级用法-DataSource 加载过程">Spring Data JPA之高级用法-DataSource 加载过程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-10-13T20:42:59.000Z" title="发表于 2020-10-13 20:42:59">2020-10-13</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/">Spring Data</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/Spring-Data-JPA/">Spring Data JPA</a></span></div><div class="content">DataSource 为何物？加载过程是怎样的？数据源是什么？当我们用第三方工具去连接数据库（Mysql，Oracle 等）的时候，一般都会让我们选择数据源，如下图所示：

以 MySQL 为例，当选择 MySQL 的时候就会弹出如下图显示的界面：

其中，我们在选择了 Driver（驱动）和 Host、User、Password 等之后，就可以创建一个 Connection，然后连接到数据库里面了。
同样的道理，在 Java 里面我们也需要用到 DataSource 去连接数据库，而 Java 定义了一套 JDBC 的协议标准，其中有一个 javax.sql.DataSource 接口类，通过实现此类就可以进行数据库连接，我们通过源码来分析一下。
DataSource 源码分析DataSource 接口里面主要的代码如下所示：
1234public interface DataSource extends CommonDataSource, Wrapper &#123;  Connection getConnection() throws SQLException;  Connect ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/post/444c90ea.html" title="缓存的原理、引入与设计">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="缓存的原理、引入与设计"></a></div><div class="recent-post-info"><a class="article-title" href="/post/444c90ea.html" title="缓存的原理、引入与设计">缓存的原理、引入与设计</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-10-13T20:42:59.000Z" title="发表于 2020-10-13 20:42:59">2020-10-13</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%BC%93%E5%AD%98/">缓存</a></span></div><div class="content">缓存的原理、引入与设计业务数据访问性能太低怎么办
缓存的基本思想
缓存的优点
缓存的代价

缓存的定义
缓存最初的含义，是指用于加速 CPU 数据交换的 RAM，即随机存取存储器，通常这种存储器使用更昂贵但快速的静态 RAM（SRAM）技术，用以对 DRAM 进行加速。这是一个狭义缓存的定义。

而广义缓存的定义则更宽泛，任何可以用于数据高速交换的存储介质都是缓存，可以是硬件也可以是软件。




缓存存在的意义就是通过开辟一个新的数据交换缓冲区，来解决原始数据获取代价太大的问题，让数据得到更快的访问。目前讲的缓存主要是指广义缓存，特别是互联网产品大量使用的各种缓存组件和技术。

缓存原理缓存的基本思想
缓存构建的基本思想是利用时间局限性原理，通过空间换时间来达到加速数据获取的目的，同时由于缓存空间的成本较高，在实际设计架构中还要考虑访问延迟和成本的权衡问题。这里面有 3 个关键点。

时间局限性原理，即被获取过一次的数据在未来会被多次引用，比如一条微博被一个人感兴趣并阅读后，它大概率还会被更多人阅读，当然如果变成热门微博后，会被数以百万/千万计算的更多用户查看。

以空间换时间，因为 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/post/7b59e5b8.html" title="CollectionUtils工具类">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CollectionUtils工具类"></a></div><div class="recent-post-info"><a class="article-title" href="/post/7b59e5b8.html" title="CollectionUtils工具类">CollectionUtils工具类</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-10-13T14:26:00.000Z" title="发表于 2020-10-13 14:26:00">2020-10-13</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%B7%A5%E5%85%B7%E7%B1%BB/">工具类</a></span></div><div class="content">CollectionUtils工具类Apache Commons Collections 使操作集合时，代码更加简洁
常用API元素不为null时，向集合添加元素
1CollectionUtils.addIgnoreNull(targetList, targetObject);

将两个已排序的集合a和b合并为一个已排序的列表，保留元素的自然顺序
1CollectionUtils.collate(Iterable&lt;? extends O&gt; a, Iterable&lt;? extends O&gt; b)

将两个已排序的集合a和b合并到一个已排序的列表中，根据比较器顺序
1CollectionUtils.collate(Iterable&lt;? extends O&gt; a, Iterable&lt;? extends O&gt; b, Comparator&lt;? super O&gt; c)

如果参数是null，则返回不可变的空集合（new EmptyList&lt;&gt;()），否则返回参数本身
1CollectionUtils.emptyIfNull(C ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/post/bc1a3b.html" title="Spring Data JPA之基础知识-自定义返回值">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Data JPA之基础知识-自定义返回值"></a></div><div class="recent-post-info"><a class="article-title" href="/post/bc1a3b.html" title="Spring Data JPA之基础知识-自定义返回值">Spring Data JPA之基础知识-自定义返回值</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-09-26T18:33:59.000Z" title="发表于 2020-09-26 18:33:59">2020-09-26</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/">Spring Data</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/Spring-Data-JPA/">Spring Data JPA</a></span></div><div class="content">Spring Data JPA 自定义返回值打开 SimpleJpaRepository 直接看它的 Structure ，从它实现的方法以及父类接口的方法看到，返回类型包括：Optional、Iterable、List、Page、Long、Boolean、Entity 等，如下图所示：

而实际上支持的返回类型还要多一些。
由于 Repository 里面支持 Iterable，所以 java 标准的 List、Set 都可以作为返回结果，并且也会支持其子类。
查询结果的返回值StreamableSpring Data 里面定义了一个特殊的子类 Streamable，Streamable 可以替代 Iterable 或任何集合类型。它还提供了方便的方法来访问 Stream，可以直接在元素上进行 ….filter(…) 和 ….map(…) 操作，并将 Streamable 连接到其他元素。
我们看个关于 UserRepository 直接继承 JpaRepository 的例子
12public interface UserRepository extends JpaReposito ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/post/331b4811.html" title="Oracle的基础知识">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Oracle的基础知识"></a></div><div class="recent-post-info"><a class="article-title" href="/post/331b4811.html" title="Oracle的基础知识">Oracle的基础知识</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-09-21T16:59:59.000Z" title="发表于 2020-09-21 16:59:59">2020-09-21</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/Oracle/">Oracle</a></span></div><div class="content">Oracle 的基础知识数据库设计
 数据库设计是画出数据库的ER图，通过ER图生成 sql 建库代码(DDL)
 生成的建库代码的约束都是追加的，方便到时删除

SQL类型
DQL：数据查询语言，关键字 select， 功能：查询
DML：数据操作语言，关键字 insert、delete、update，功能：操作数据
DDL：数据定义语言，关键字 create、drop、alter，功能：操作数据库对象
DCL：数据控制语言，关键字 grant、revoke，功能：用户授权撤权
TCL：事务控制语言，关键字 commit、rollback、savepoint，功能：事务处理

查询12345select [distinct]&#123;* | &lt;字段名&gt; | 表名.*&#125; from &lt;表名&gt;-- 1. 给表一个别名select * from emp e;-- 2. 给返回字段一个别名select emp.ename as 员工名 from emp;

条件查询where 关键字
查询运算符对比运算符


运算符
说明



=
等号；oracle 里面 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/post/b1bcc0f5.html" title="Spring Data JPA之基础知识-DQM语法">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Data JPA之基础知识-DQM语法"></a></div><div class="recent-post-info"><a class="article-title" href="/post/b1bcc0f5.html" title="Spring Data JPA之基础知识-DQM语法">Spring Data JPA之基础知识-DQM语法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-09-21T16:42:59.000Z" title="发表于 2020-09-21 16:42:59">2020-09-21</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/">Spring Data</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/Spring-Data-JPA/">Spring Data JPA</a></span></div><div class="content">Defining Query Methods 的命名语法与参数Spring Data JPA 的方法名定义查询方法 （ Defining Query Methods ）可以使语义更加清晰，提升开发效率。
DQM 语法共有 2 种

直接通过方法名实现
@Query 手动在方法上定义

定义查询方法的配置和使用方法若想要实现 CRUD 的操作，常规做法是写一大堆 SQL 语句。但在 JPA 里面，只需要继承 Spring Data Common 里面的任意 Repository 接口或者子接口，然后直接通过方法名就可以实现。具体使用步骤：
User 实体的 UserRepository 继承 Spring Data Common 里面的 Repository 接口
123public interface UserRepository extends CrudRepository&lt;User, Long&gt; &#123;     User findByEmailAddress(String emailAddress);&#125;

对于 Service 层就可以直接使用 User ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/post/c7257cf8.html" title="Spring Data JPA之基础知识-Repository">     <img class="post_bg" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Data JPA之基础知识-Repository"></a></div><div class="recent-post-info"><a class="article-title" href="/post/c7257cf8.html" title="Spring Data JPA之基础知识-Repository">Spring Data JPA之基础知识-Repository</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-09-21T16:42:59.000Z" title="发表于 2020-09-21 16:42:59">2020-09-21</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/">Spring Data</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-Data/Spring-Data-JPA/">Spring Data JPA</a></span></div><div class="content">Spring Data Common 之 Repository 如何全面掌握？Spring Data 对整个数据操作做了很好的封装，其中 Spring Data Common 定义了很多公用的接口和一些相对数据操作的公共实现（如分页排序、结果映射、Autiting 信息、事务等），而 Spring Data JPA 就是 Spring Data Common 的关系数据库的查询实现。
Spring Data Common 的依赖关系我们通过 Gradle 看一下项目依赖，了解一下 Spring Data Common 的依赖关系。

通过上图的项目依赖，不难发现，数据库连接用的是 JDBC，连接池用的是 HikariCP，强依赖 Hibernate；Spring Boot Starter Data JPA 依赖 Spring Data JPA；而 Spring Data JPA 依赖 Spring Data Commons。
在这些 jar 依赖关系中，Spring Data Commons 是重点，因为 Spring Data Commons 是终极依赖。下面我们学习 DB 操作的入 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/28/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/#content-inner">28</a><span class="page-number current">29</span><a class="page-number" href="/page/30/#content-inner">30</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/#content-inner">32</a><a class="extend next" rel="next" href="/page/30/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Leo Liu</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">320</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">82</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">46</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/liule8"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/LIULE8" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:leo.liu.scau@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">这里是公告</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/3de10f44.html" title="趣学设计模式之编程思维-分层思维"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="趣学设计模式之编程思维-分层思维"/></a><div class="content"><a class="title" href="/post/3de10f44.html" title="趣学设计模式之编程思维-分层思维">趣学设计模式之编程思维-分层思维</a><time datetime="2021-10-26T16:12:49.000Z" title="发表于 2021-10-26 16:12:49">2021-10-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/f50b517d.html" title="趣学设计模式之编程思维-组合思维"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="趣学设计模式之编程思维-组合思维"/></a><div class="content"><a class="title" href="/post/f50b517d.html" title="趣学设计模式之编程思维-组合思维">趣学设计模式之编程思维-组合思维</a><time datetime="2021-10-26T15:04:28.000Z" title="发表于 2021-10-26 15:04:28">2021-10-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/50738ec5.html" title="趣学设计模式之编程模式-"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="趣学设计模式之编程模式-"/></a><div class="content"><a class="title" href="/post/50738ec5.html" title="趣学设计模式之编程模式-">趣学设计模式之编程模式-</a><time datetime="2021-10-26T13:07:00.000Z" title="发表于 2021-10-26 13:07:00">2021-10-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/91858c0f.html" title="趣学设计模式之编程原则-"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="趣学设计模式之编程原则-"/></a><div class="content"><a class="title" href="/post/91858c0f.html" title="趣学设计模式之编程原则-">趣学设计模式之编程原则-</a><time datetime="2021-10-26T13:06:31.000Z" title="发表于 2021-10-26 13:06:31">2021-10-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/19cb0842.html" title="趣学设计模式之编程思维-学习思维"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="趣学设计模式之编程思维-学习思维"/></a><div class="content"><a class="title" href="/post/19cb0842.html" title="趣学设计模式之编程思维-学习思维">趣学设计模式之编程思维-学习思维</a><time datetime="2021-10-26T13:05:27.000Z" title="发表于 2021-10-26 13:05:27">2021-10-26</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JDK/"><span class="card-category-list-name">JDK</span><span class="card-category-list-count">4</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JDK/JDK8/"><span class="card-category-list-name">JDK8</span><span class="card-category-list-count">4</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">83</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"><span class="card-category-list-name">多线程</span><span class="card-category-list-count">81</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JavaScript/"><span class="card-category-list-name">JavaScript</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/MQ/"><span class="card-category-list-name">MQ</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Spring/"><span class="card-category-list-name">Spring</span><span class="card-category-list-count">55</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Spring/Spring-Data/"><span class="card-category-list-name">Spring Data</span><span class="card-category-list-count">33</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Spring/" style="font-size: 1.4em; color: rgb(156, 67, 8)">Spring</a><a href="/tags/JPA/" style="font-size: 1.15em; color: rgb(119, 161, 12)">JPA</a><a href="/tags/Spring-Data/" style="font-size: 1.35em; color: rgb(88, 64, 196)">Spring Data</a><a href="/tags/Spring-Data-JPA/" style="font-size: 1.38em; color: rgb(187, 91, 131)">Spring Data JPA</a><a href="/tags/Vue/" style="font-size: 1.17em; color: rgb(132, 139, 162)">Vue</a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" style="font-size: 1.15em; color: rgb(104, 110, 56)">面向对象设计原则</a><a href="/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 1.17em; color: rgb(112, 44, 31)">架构</a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.22em; color: rgb(93, 63, 45)">算法</a><a href="/tags/UML/" style="font-size: 1.17em; color: rgb(137, 194, 184)">UML</a><a href="/tags/%E9%94%81/" style="font-size: 1.17em; color: rgb(45, 24, 140)">锁</a><a href="/tags/%E9%9B%86%E5%90%88/" style="font-size: 1.15em; color: rgb(174, 73, 20)">集合</a><a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 1.17em; color: rgb(60, 176, 103)">并发</a><a href="/tags/%E6%B3%A8%E8%A7%A3/" style="font-size: 1.22em; color: rgb(6, 15, 12)">注解</a><a href="/tags/JVM/" style="font-size: 1.25em; color: rgb(54, 122, 151)">JVM</a><a href="/tags/Java/" style="font-size: 1.45em; color: rgb(113, 70, 37)">Java</a><a href="/tags/CompletableFuture/" style="font-size: 1.15em; color: rgb(137, 168, 146)">CompletableFuture</a><a href="/tags/Future/" style="font-size: 1.15em; color: rgb(141, 83, 95)">Future</a><a href="/tags/JavaScript/" style="font-size: 1.15em; color: rgb(3, 40, 191)">JavaScript</a><a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="font-size: 1.42em; color: rgb(185, 187, 138)">并发编程</a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 1.42em; color: rgb(185, 6, 152)">线程</a><a href="/tags/MySQL/" style="font-size: 1.32em; color: rgb(137, 23, 182)">MySQL</a><a href="/tags/I-O%E6%A8%A1%E5%9E%8B/" style="font-size: 1.38em; color: rgb(62, 116, 50)">I\O模型</a><a href="/tags/Netty/" style="font-size: 1.38em; color: rgb(36, 137, 143)">Netty</a><a href="/tags/Socket%E7%BC%96%E7%A8%8B/" style="font-size: 1.38em; color: rgb(73, 35, 25)">Socket编程</a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.17em; color: rgb(15, 111, 56)">数据库</a><a href="/tags/Oracle/" style="font-size: 1.17em; color: rgb(88, 96, 55)">Oracle</a><a href="/tags/SQL/" style="font-size: 1.17em; color: rgb(150, 194, 45)">SQL</a><a href="/tags/pageable/" style="font-size: 1.15em; color: rgb(161, 186, 36)">pageable</a><a href="/tags/RestTemplate/" style="font-size: 1.15em; color: rgb(33, 20, 182)">RestTemplate</a><a href="/tags/String/" style="font-size: 1.3em; color: rgb(169, 116, 72)">String</a><a href="/tags/Springboot/" style="font-size: 1.2em; color: rgb(42, 84, 155)">Springboot</a><a href="/tags/Annotation/" style="font-size: 1.17em; color: rgb(48, 40, 129)">Annotation</a><a href="/tags/JpaSpecificationExecutor/" style="font-size: 1.2em; color: rgb(110, 102, 91)">JpaSpecificationExecutor</a><a href="/tags/%E4%B9%90%E8%A7%82%E9%94%81/" style="font-size: 1.15em; color: rgb(94, 9, 126)">乐观锁</a><a href="/tags/Spring-Security/" style="font-size: 1.27em; color: rgb(42, 153, 38)">Spring Security</a><a href="/tags/Transaction/" style="font-size: 1.15em; color: rgb(82, 101, 142)">Transaction</a><a href="/tags/redis/" style="font-size: 1.15em; color: rgb(74, 87, 188)">redis</a><a href="/tags/Join/" style="font-size: 1.15em; color: rgb(178, 200, 24)">Join</a><a href="/tags/Time/" style="font-size: 1.15em; color: rgb(151, 170, 136)">Time</a><a href="/tags/Mixin/" style="font-size: 1.17em; color: rgb(52, 127, 77)">Mixin</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/10/"><span class="card-archive-list-date">十月 2021</span><span class="card-archive-list-count">84</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">九月 2021</span><span class="card-archive-list-count">106</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">27</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">21</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">六月 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">四月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/02/"><span class="card-archive-list-date">二月 2021</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/01/"><span class="card-archive-list-date">一月 2021</span><span class="card-archive-list-count">11</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">320</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">952k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-10-26T14:13:01.585Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Leo Liu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  fetch('https://api.btstu.cn/yan/api.php?charset=utf-8&encode=json')
    .then(response => response.json())
    .then(data => {
      if (true) {
        var sub = "".length == 0 ? new Array() : "".split(',')
        var both = sub.unshift(data.text)
        typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = data.text
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>