<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Leo's notes</title><meta name="author" content="Leo Liu"><meta name="copyright" content="Leo Liu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="Leo&#39;s notes">
<meta property="og:url" content="https://liule8.github.io/page/12/index.html">
<meta property="og:site_name" content="Leo&#39;s notes">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://liule8.github.io/images/avatar.png">
<meta property="article:author" content="Leo Liu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://liule8.github.io/images/avatar.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://liule8.github.io/page/12/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-09-30 12:51:24'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/images/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">227</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">74</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">51</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Leo's notes</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Leo's notes</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/LIULE8" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:leo.liu.scau@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/08/21/Restful%E4%BC%9A%E8%A2%AB%E6%96%B0%E7%89%88GraphQL%E5%B9%B2%E6%8E%89%E5%90%97/" title="Restful会被新版GraphQL干掉吗？">Restful会被新版GraphQL干掉吗？</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-21T14:28:13.000Z" title="发表于 2021-08-21 14:28:13">2021-08-21</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Spring/">Spring</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/Spring/Spring-GraphQL/">Spring GraphQL</a></span></div><div class="content">Restful会被新版GraphQL干掉吗？Spring 社区正式宣布 Spring GraphQL 成为其家族的顶级项目，并发布了 1.0 里程碑版本。

而此时也正逢 GraphQL Java 诞生 6 周年，可以说 Spring GraphQL 的核心价值便是将 GraphQL Java 集成到了 Spring 生态中。

一直以来，都少不了 GraphQL 与 RESTful 这两种前后端交互 Web API 的对比讨论。那么在新模式下，RESTful 会被这个新版 GraphQL 超越甚至替代吗？会为你接下来的工作、业务带来新变化吗？
想要 GraphQL 落地，就需要采用对应的开发框架。将基于 Spring GraphQL 这款崭新的开发框架，给出精简而又完整的原创性案例代码，并展示其开发流程和实战技巧，而这些代码完全可以直接应用到你的日常开发中。
新版 GraphQL：从 Java 走向 Spring我们知道，GraphQL 是一种理念和规范，它并不直接提供开发工具和框架。
而 GraphQL Java 是基于 Java 开发的一个 GraphQL 实现库，但这个实现库一 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/08/20/MySQL%E5%AE%9E%E6%88%98%E5%AE%9D%E5%85%B8%E4%B9%8B%E8%A1%A8%E7%BB%93%E6%9E%84-%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B/" title="MySQL实战宝典之表结构-日期类型">MySQL实战宝典之表结构-日期类型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-20T13:50:00.000Z" title="发表于 2021-08-20 13:50:00">2021-08-20</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MySQL/">MySQL</a></span></div><div class="content">日期类型：TIMESTAMP 可能是巨坑几乎每张业务表都带有一个日期列，用于记录每条记录产生和变更的时间。比如用户表会有一个日期列记录用户注册的时间、用户最后登录的时间。又比如，电商行业中的订单表（核心业务表）会有一个订单产生的时间列，当支付时间超过订单产生的时间，这个订单可能会被系统自动取消。
日期类型虽然常见，但在表结构设计中也容易犯错，比如很多开发同学都倾向使用整型存储日期类型，同时也会忽略不同日期类型对于性能可能存在的潜在影响。所以有必要认真学习，举一反三，在自己的业务中做好日期类型的设计。
日期类型MySQL 数据库中常见的日期类型有 YEAR、DATE、TIME、DATETIME、TIMESTAMEP。因为业务绝大部分场景都需要将日期精确到秒，所以在表结构设计中，常见使用的日期类型为DATETIME 和 TIMESTAMP。接下来，我就带你深入了解这两种类型，以及它们在设计中的应用实战。
DATETIME类型 DATETIME 最终展现的形式为：YYYY-MM-DD HH：MM：SS，固定占用 8 个字节。
从 MySQL 5.6 版本开始，DATETIME 类型支持毫秒， ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/08/20/ConcurrentHashMap%E9%9D%A2%E8%AF%95%E6%8C%87%E5%8D%97/" title="ConcurrentHashMap面试指南">ConcurrentHashMap面试指南</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-20T11:55:48.000Z" title="发表于 2021-08-20 11:55:48">2021-08-20</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%B9%B6%E5%8F%91/">并发</a></span></div><div class="content">ConcurrentHashMap面试指南
ConcurrentHashMap涉及的知识点：HashMap，HashTable，UnSafe，CAS，数组+链表，Segment，ReentrantLock（非公平锁，公平锁），红黑树。

大多数程序员都是业务开发者，在面试官眼里，如果没有 3 到 5 年的开发经验，未必能围绕底层源码，全面掌握并展示线程和排查 OOM 问题等技能。但如果求职者能够通过 ConcurrentHashMap 这个切入点全面展示技能，那么就能很大程度上提升面试成功的可能性。
接下来，就从底层源码和技术面试这两个角度，全面分析下 ConcurrentHashMap 对象。
首先会通过底层源码，从线程并发角度，分析读写 ConcurrentHashMap 对象的详细做法，然后，在此基础上教你如何在面试中展示这方面的亮点；不仅如此，还会教你在面试中展示“通过分析源码排查 OOM 问题”的说辞。
先看数据结构，其中包含面试必问点 volatileConcurrentHashMap 是以键值对的形式存储数据，在 JDK 1.8 及之上的版本里，ConcurrentHas ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/08/19/MySQL%E5%AE%9E%E6%88%98%E5%AE%9D%E5%85%B8%E4%B9%8B%E8%A1%A8%E7%BB%93%E6%9E%84-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B/" title="MySQL实战宝典之表结构-字符串类型">MySQL实战宝典之表结构-字符串类型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-19T09:58:03.000Z" title="发表于 2021-08-19 09:58:03">2021-08-19</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MySQL/">MySQL</a></span></div><div class="content">字符串类型：不能忽略的 COLLATION字符串类型在表结构设计时也比较常见，它通常用于描述具体的信息。
MySQL 数据库的字符串类型有 CHAR、VARCHAR、BINARY、BLOB、TEXT、ENUM、SET。不同的类型在业务设计、数据库性能方面的表现完全不同，其中最常使用的是 CHAR、VARCHAR。
CHAR 和 VARCHAR 的定义CHAR(N) 用来保存固定长度的字符，N 的范围是 0 ~ 255，请牢记，N 表示的是字符，而不是字节。VARCHAR(N) 用来保存变长字符，N 的范围为 0 ~ 65536， N 表示字符。
在超出 65536 个字符的情况下，可以考虑使用更大的字符类型 TEXT 或 BLOB，两者最大存储长度为 4G，其区别是 BLOB 没有字符集属性，纯属二进制存储。
和 Oracle、Microsoft SQL Server 等传统关系型数据库不同的是，MySQL 数据库的 VARCHAR 字符类型，最大能够存储 65536 个字符，所以在 MySQL 数据库下，绝大部分场景使用类型 VARCHAR 就足够了。
字符集在表结构设计中，除了将列 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/08/18/MySQL%E5%AE%9E%E6%88%98%E5%AE%9D%E5%85%B8%E4%B9%8B%E8%A1%A8%E7%BB%93%E6%9E%84-%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B/" title="MySQL实战宝典之表结构-数字类型">MySQL实战宝典之表结构-数字类型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-18T13:04:30.000Z" title="发表于 2021-08-18 13:04:30">2021-08-18</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MySQL/">MySQL</a></span></div><div class="content">数字类型：避免自增踩坑在进行表结构设计时，数字类型是最为常见的类型之一，但要用好数字类型并不如想象得那么简单，比如：

怎么设计一个互联网海量并发业务的自增主键？用 INT 就够了？

怎么设计账户的余额？用 DECIMAL 类型就万无一失了吗？


以上全错！
数字类型看似简单，但在表结构架构设计中很容易出现上述“设计上思考不全面”的问题（特别是在海量并发的互联网场景下）。
数字类型整型类型MySQL 数据库支持 SQL 标准支持的整型类型：INT、SMALLINT。此外，MySQL 数据库也支持诸如 TINYINT、MEDIUMINT 和 BIGINT 整型类型（表 1 显示了各种整型所占用的存储空间及取值范围）：



类型
占用空间
最小值 - 最大值【signed】
最小值 - 最大值 【unsigned】



TINYINT
1
-128 ~ 127
0 ~ 255


SMALLINT
2
-32768 ~ 32767
0 ~ 65535


MEDIUMINT
3
-8388608 ~ 8388607
0 ~ 16777215


INT
4
-2147483648  ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/08/18/%E9%AB%98%E5%B9%B6%E5%8F%91%E4%B8%8B%20MQ%20%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E9%A1%BA%E5%BA%8F%E6%B6%88%E8%B4%B9/" title="高并发下 MQ 如何保证顺序消费">高并发下 MQ 如何保证顺序消费</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-18T10:58:56.000Z" title="发表于 2021-08-18 10:58:56">2021-08-18</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/MQ/">MQ</a></span></div><div class="content">高并发下 MQ 如何保证顺序消费？
前提：
关于消息队列中的时序问题。是因为有一些程序员只会简单地写“生产”跟“消费”的代码，但对 MQ 的一些注意事项都不甚明了。

MQ 本身就是为了“分布式”与“高并发”设计的中间件，但这两个场景本身就决定了：一些小问题就很容易引起大麻烦。所以如果你不能对 MQ 的特性了如指掌，那么写出来的代码一旦上了生产，就会引发生产事故，而且还是不易排查的那种。
所以今天就聊聊 MQ 特性中的一点——如何保证顺序？以及如何应对意外事件的处理，避免事故的发生。
时序的业务场景我们在使用消息队列时都知道，写出生产端与消费端的 happy path 代码并不难，难点往往在于 MQ 的几个要点：不丢消息、重试、延时、幂等、时序等，这几个要点往往逻辑复杂。

前面说的 happy path 的代码，只需要 20% 的时间就能满足 80% 的场景；

但是后面这些要点，却需要用 80% 的时间满足剩下 20% 的场景。


来看一下 MQ 的简单示意图：

这里面有 3 个生产者，分别生产 Data1、Data2、Data3 三条消息到 MQ；

而后三个消费者，分别消费 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/08/18/%E5%BA%94%E7%94%A8%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E4%B9%8B%E4%BA%B2%E5%92%8C%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/" title="应用性能分析之亲和线程模型">应用性能分析之亲和线程模型</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-18T09:33:55.000Z" title="发表于 2021-08-18 09:33:55">2021-08-18</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BA%94%E7%94%A8%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">应用性能分析</a></span></div><div class="content">亲和线程模型：分布式链路追踪，学习 SkyWalking 就够了
SkyWalking 的线程监控设计：SkyWalking 使用字节码增强技术实现了监控，通常的场景下在应用服务的启动命令中，增加探针属性就能完成接入 SkyWalking 的 APM 监控。

这样简单的部署方案最大化地提升了接入效率，但也让开发人员越来越忽略对 SkyWalking 的学习。久而久之，当接入 SkyWalking 出现问题时，大家解决问题的能力就越来越低了。遇到最多的问题就是：多线程怎么串联链路，日志里面的全链路 ID 怎么打印不出来？这些问题的本质原因便是没有掌握好对线程的监控。
工作线程、任务线程、线程池是如何配合的？经常用了两个关键词来描述线程，那就是工作线程和任务线程。
这两个词来自 Java 并发框架包（java.util.concurrent）中的线程池执行器类（ThreadPoolExecutor），其中当前正在执行 runWorker 方法的线程是工作线程；在 runWorker 不停循环，从等待执行队列中获取的对象为任务线程。
接下来，看下工作线程和任务线程是如何配合，并在线程池中完 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/08/18/%E5%BA%94%E7%94%A8%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E4%B9%8B%E8%B5%84%E6%BA%90%E8%8A%82%E7%82%B9%E6%A0%91Sentinel/" title="应用性能分析之资源节点树Sentinel">应用性能分析之资源节点树Sentinel</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-18T09:33:55.000Z" title="发表于 2021-08-18 09:33:55">2021-08-18</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BA%94%E7%94%A8%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/">应用性能分析</a></span></div><div class="content">资源节点树：通过 Sentinel 无侵入实现流量链生成规则什么叫“侵入”？什么叫“无侵入”？在学习 Sentinel，讨论无侵入监控时，你可能会问：Sentinel 不是“无侵入”的啊，接入 Sentinel 是需要引入客户端 jar 包的？

其实 Sentinel 是体感“无侵入”，而代码“侵入”的。

目前很多说法是：像 SkyWalking 这种 APM 工具，通过探针实现字节码增强的方式才叫作“无侵入”，这样的理解是错误的。
我们知道 APM 工具的实现方案有两种：一种是黑盒方案，另一种是标记方案。当今开源的 APM 工具都是使用标记方案实现，所以对应用服务是有侵入的。
而“侵入”的意思是：APM 客户端工具会向应用服务内部织入监控代码，这一点我们可以通过对应用服务进行远程调试，或是对 Class 文件进行反解析来证实。
那之所以有同学会有“只有 SkyWalking 这类通过探针实现的 APM 工具才是无侵入”的错觉，归根结底是使用 APM 产品时的不同“体感”所致。
我们可以将侵入度按照不同“体感”，划分为以下两种。

第一种以 SkyWalking 为代表的零接入“体 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/08/17/%E5%BA%8F%E5%88%97%E5%8C%96%E6%8E%A5%E5%8F%A3/" title="序列化接口">序列化接口</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-17T09:01:04.000Z" title="发表于 2021-08-17 09:01:04">2021-08-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BA%8F%E5%88%97%E5%8C%96/">序列化</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/%E5%BA%8F%E5%88%97%E5%8C%96/%E6%8E%A5%E5%8F%A3/">接口</a></span></div><div class="content">序列化接口序列化使用场景

对象持久化；
在网络中传输对象；
在进程间传输对象；

共有两个接口Serializable和Externalizable
SerializableSerializable 原理为什么要实现Serializable接口才能序列化呢？
1234567891011121314151617// JDK8 java.io.ObjectOutputStream 1171行if (obj instanceof String) &#123;    writeString((String) obj, unshared);&#125; else if (cl.isArray()) &#123;    writeArray(obj, desc, unshared);&#125; else if (obj instanceof Enum) &#123;    writeEnum((Enum&lt;?&gt;) obj, desc, unshared);&#125; else if (obj instanceof Serializable) &#123;    writeOrdin ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/08/17/%E5%BA%8F%E5%88%97%E5%8C%96%E6%B3%A8%E8%A7%A3/" title="序列化注解">序列化注解</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-08-17T08:47:10.000Z" title="发表于 2021-08-17 08:47:10">2021-08-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%BA%8F%E5%88%97%E5%8C%96/">序列化</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/%E5%BA%8F%E5%88%97%E5%8C%96/%E6%B3%A8%E8%A7%A3/">注解</a></span></div><div class="content">Jackson的序列化注解
@JsonBackReference 和 @JsonManagedReference，以及 @JsonIgnore 都是为了解决对象中存在双向引用导致的无限递归（infinite recursion）问题。这些标注均可用在属性或对应的get、set方法中。

@JsonBackReference 和 @JsonManagedReference
@JsonBackReference 标注的属性在序列化（serialization，即将对象转换为json数据）时，会被忽略（即结果中的json数据不包含该属性的内容）。
@JsonManagedReference 标注的属性则会被序列化


注意：
@JsonBackReference 和 @JsonManagedReference 这两个标注通常配对使用。
 在序列化时，@JsonBackReference 的作用相当于 @JsonIgnore，此时可以没有 @JsonManagedReference。
 在反序列化（deserialization，即json数据转换为对象）时，如果没有加 @JsonManage ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/11/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/#content-inner">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/#content-inner">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/#content-inner">23</a><a class="extend next" rel="next" href="/page/13/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/images/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Leo Liu</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">227</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">74</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">51</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/LIULE8" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:leo.liu.scau@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/10/01/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/" title="Java并发编程之知识图谱">Java并发编程之知识图谱</a><time datetime="2021-09-30T20:05:29.000Z" title="发表于 2021-09-30 20:05:29">2021-09-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/10/01/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8BAQS%E6%A1%86%E6%9E%B6-AQS%20%E5%9C%A8%20CountDownLatch%20%E7%AD%89%E7%B1%BB%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88/" title="Java并发编程之AQS框架-AQS 在 CountDownLatch 等类中的应用原理是什么？">Java并发编程之AQS框架-AQS 在 CountDownLatch 等类中的应用原理是什么？</a><time datetime="2021-09-30T19:41:50.000Z" title="发表于 2021-09-30 19:41:50">2021-09-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/10/01/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8BAQS%E6%A1%86%E6%9E%B6-AQS%20%E7%9A%84%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84/" title="Java并发编程之AQS框架-AQS 的内部原理是什么样的？">Java并发编程之AQS框架-AQS 的内部原理是什么样的？</a><time datetime="2021-09-30T18:44:06.000Z" title="发表于 2021-09-30 18:44:06">2021-09-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/10/01/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8BAQS%E6%A1%86%E6%9E%B6-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%20AQS/" title="Java并发编程之AQS框架-为什么需要 AQS？AQS 的作用和重要性是什么？">Java并发编程之AQS框架-为什么需要 AQS？AQS 的作用和重要性是什么？</a><time datetime="2021-09-30T18:44:06.000Z" title="发表于 2021-09-30 18:44:06">2021-09-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/09/30/Spring%20Boot%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5-%E8%83%8C%E5%8E%8B%E6%9C%BA%E5%88%B6/" title="Spring Boot响应式编程之基本概念-背压机制">Spring Boot响应式编程之基本概念-背压机制</a><time datetime="2021-09-30T13:31:12.000Z" title="发表于 2021-09-30 13:31:12">2021-09-30</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JDK/"><span class="card-category-list-name">JDK</span><span class="card-category-list-count">4</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JDK/JDK8/"><span class="card-category-list-name">JDK8</span><span class="card-category-list-count">4</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JPA/"><span class="card-category-list-name">JPA</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JPA/Spring/"><span class="card-category-list-name">Spring</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JPA/Spring/Spring-Data/"><span class="card-category-list-name">Spring Data</span><span class="card-category-list-count">1</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JPA/Spring/Spring-Data/Spring-Data-Jpa/"><span class="card-category-list-name">Spring Data Jpa</span><span class="card-category-list-count">1</span></a></li></ul></li></ul></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">82</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"><span class="card-category-list-name">多线程</span><span class="card-category-list-count">80</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Spring/" style="font-size: 1.39em; color: rgb(89, 152, 174)">Spring</a><a href="/tags/JPA/" style="font-size: 1.15em; color: rgb(162, 86, 111)">JPA</a><a href="/tags/Spring-Data/" style="font-size: 1.3em; color: rgb(177, 123, 122)">Spring Data</a><a href="/tags/Spring-Data-Jpa/" style="font-size: 1.33em; color: rgb(179, 40, 134)">Spring Data Jpa</a><a href="/tags/Vue/" style="font-size: 1.18em; color: rgb(28, 187, 72)">Vue</a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/" style="font-size: 1.15em; color: rgb(7, 123, 64)">面向对象设计原则</a><a href="/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 1.18em; color: rgb(2, 144, 77)">架构</a><a href="/tags/UML/" style="font-size: 1.18em; color: rgb(148, 29, 1)">UML</a><a href="/tags/%E9%94%81/" style="font-size: 1.18em; color: rgb(183, 58, 156)">锁</a><a href="/tags/%E9%9B%86%E5%90%88/" style="font-size: 1.15em; color: rgb(177, 171, 55)">集合</a><a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 1.18em; color: rgb(51, 87, 169)">并发</a><a href="/tags/%E6%B3%A8%E8%A7%A3/" style="font-size: 1.24em; color: rgb(0, 82, 109)">注解</a><a href="/tags/Java/" style="font-size: 1.45em; color: rgb(159, 149, 132)">Java</a><a href="/tags/CompletableFuture/" style="font-size: 1.15em; color: rgb(195, 26, 182)">CompletableFuture</a><a href="/tags/Future/" style="font-size: 1.15em; color: rgb(122, 143, 84)">Future</a><a href="/tags/JavaScript/" style="font-size: 1.15em; color: rgb(193, 160, 96)">JavaScript</a><a href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" style="font-size: 1.42em; color: rgb(114, 129, 13)">并发编程</a><a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 1.42em; color: rgb(97, 44, 139)">线程</a><a href="/tags/MySQL/" style="font-size: 1.36em; color: rgb(50, 20, 174)">MySQL</a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.18em; color: rgb(187, 66, 148)">数据库</a><a href="/tags/Oracle/" style="font-size: 1.18em; color: rgb(103, 32, 151)">Oracle</a><a href="/tags/SQL/" style="font-size: 1.18em; color: rgb(177, 75, 129)">SQL</a><a href="/tags/pageable/" style="font-size: 1.15em; color: rgb(108, 6, 30)">pageable</a><a href="/tags/RestTemplate/" style="font-size: 1.15em; color: rgb(132, 118, 23)">RestTemplate</a><a href="/tags/String/" style="font-size: 1.24em; color: rgb(14, 20, 64)">String</a><a href="/tags/Springboot/" style="font-size: 1.21em; color: rgb(132, 108, 38)">Springboot</a><a href="/tags/Annotation/" style="font-size: 1.18em; color: rgb(38, 96, 155)">Annotation</a><a href="/tags/Spring-Security/" style="font-size: 1.27em; color: rgb(74, 53, 149)">Spring Security</a><a href="/tags/Transaction/" style="font-size: 1.15em; color: rgb(43, 165, 52)">Transaction</a><a href="/tags/%E4%B9%90%E8%A7%82%E9%94%81/" style="font-size: 1.15em; color: rgb(185, 39, 163)">乐观锁</a><a href="/tags/redis/" style="font-size: 1.15em; color: rgb(156, 61, 178)">redis</a><a href="/tags/Join/" style="font-size: 1.15em; color: rgb(103, 87, 100)">Join</a><a href="/tags/Time/" style="font-size: 1.15em; color: rgb(9, 193, 176)">Time</a><a href="/tags/Mixin/" style="font-size: 1.18em; color: rgb(33, 185, 6)">Mixin</a><a href="/tags/WOL/" style="font-size: 1.15em; color: rgb(42, 78, 37)">WOL</a><a href="/tags/docker/" style="font-size: 1.18em; color: rgb(72, 113, 188)">docker</a><a href="/tags/hexo/" style="font-size: 1.15em; color: rgb(35, 125, 83)">hexo</a><a href="/tags/lambda/" style="font-size: 1.18em; color: rgb(126, 73, 192)">lambda</a><a href="/tags/windows/" style="font-size: 1.18em; color: rgb(67, 48, 183)">windows</a><a href="/tags/nvm/" style="font-size: 1.15em; color: rgb(30, 8, 47)">nvm</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">九月 2021</span><span class="card-archive-list-count">102</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">27</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">21</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">六月 2021</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">四月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/02/"><span class="card-archive-list-date">二月 2021</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/01/"><span class="card-archive-list-date">一月 2021</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">十一月 2020</span><span class="card-archive-list-count">18</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">227</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-09-30T12:51:22.488Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Leo Liu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>function subtitleType () {
  fetch('https://api.btstu.cn/yan/api.php?charset=utf-8&encode=json')
    .then(response => response.json())
    .then(data => {
      if (true) {
        var sub = "".length == 0 ? new Array() : "".split(',')
        var both = sub.unshift(data.text)
        typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = data.text
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>